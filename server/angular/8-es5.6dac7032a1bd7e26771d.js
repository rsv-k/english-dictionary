function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Tur3:function(t,e,n){"use strict";n.r(e),n.d(e,"LearnModule",(function(){return dt}));var r=n("tyNb"),i=n("fXoL"),o=n("GOW1"),s=n("ofXK"),a=n("Wp6s");function c(t,e){if(1&t&&(i.Sb(0,"mat-card-subtitle"),i.zc(1),i.Rb()),2&t){var n=i.ec();i.Bb(1),i.Bc(" ",n.wordsAmount," words to learn ")}}var u,l=((u=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||u)},u.\u0275cmp=i.Hb({type:u,selectors:[["app-learn-game-card"]],inputs:{title:"title",wordsAmount:"wordsAmount"},decls:5,vars:2,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(i.Sb(0,"mat-card"),i.Sb(1,"mat-card-header"),i.Sb(2,"mat-card-title"),i.zc(3),i.Rb(),i.xc(4,c,2,1,"mat-card-subtitle",0),i.Rb(),i.Rb()),2&t&&(i.Bb(3),i.Bc(" ",e.title," "),i.Bb(1),i.kc("ngIf",e.wordsAmount))},directives:[a.a,a.d,a.g,s.l,a.f],styles:["mat-card[_ngcontent-%COMP%]{height:100px;margin-bottom:10px;cursor:pointer}"]}),u);function h(t,e){if(1&t){var n=i.Tb();i.Sb(0,"app-learn-game-card",3),i.ac("click",(function(){i.rc(n);var t=e.$implicit;return i.ec().onNavigate(t)})),i.Rb()}if(2&t){var r=e.$implicit;i.kc("title",r.title)("wordsAmount",r.wordsQuantity)}}var d,b,f=((d=function(){function t(e,n,r){_classCallCheck(this,t),this.learnService=e,this.route=n,this.router=r,this.games=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe((function(e){for(var n=t.learnService.getAvailableGames(),r=0;r<e.quantities.length;r++)t.games.push({title:n[r],wordsQuantity:e.quantities[r]})}))}},{key:"onNavigate",value:function(t){var e=t.title.split(" ").join("_").toLowerCase();this.router.navigate(["/learn/"+e])}}]),t}()).\u0275fac=function(t){return new(t||d)(i.Nb(o.a),i.Nb(r.a),i.Nb(r.c))},d.\u0275cmp=i.Hb({type:d,selectors:[["app-learn"]],decls:6,vars:1,consts:[[1,"learn"],[1,"games"],[3,"title","wordsAmount","click",4,"ngFor","ngForOf"],[3,"title","wordsAmount","click"]],template:function(t,e){1&t&&(i.Sb(0,"section",0),i.Sb(1,"header"),i.Sb(2,"h1"),i.zc(3,"Training"),i.Rb(),i.Rb(),i.Sb(4,"main",1),i.xc(5,h,1,2,"app-learn-game-card",2),i.Rb(),i.Rb()),2&t&&(i.Bb(5),i.kc("ngForOf",e.games))},directives:[s.k,l],styles:[".learn[_ngcontent-%COMP%]{width:60%;margin:0 auto}app-learn-game-card[_ngcontent-%COMP%]:focus{outline:0}"]}),d),p=n("lJxs"),g=n("vkgz"),m=((b=function(){function t(e,n){_classCallCheck(this,t),this.learnService=e,this.router=n}return _createClass(t,[{key:"canActivate",value:function(t,e){var n=this,r=e.url.split("/")[2].split("_").join(" ");r=r[0].toUpperCase()+r.slice(1).toLowerCase();var i=this.learnService.getAvailableGames().findIndex((function(t){return t===r}));return this.learnService.getQuantities().pipe(Object(p.a)((function(t){return!!t[i]})),Object(g.a)((function(t){t||n.router.navigate(["/learn"])})))}}]),t}()).\u0275fac=function(t){return new(t||b)(i.Wb(o.a),i.Wb(r.c))},b.\u0275prov=i.Jb({token:b,factory:b.\u0275fac,providedIn:"root"}),b),v=n("R0Ic"),k=n("OiFK"),y=n("bTqV");function w(t,e){if(1&t){var n=i.Tb();i.Sb(0,"button",4),i.ac("click",(function(){i.rc(n);var t=e.$implicit;return i.ec().onAnswer(t)})),i.zc(1),i.Rb()}if(2&t){var r=e.$implicit,o=e.index;i.kc("color",null==r?null:r.color),i.Cb("data-before",o+1),i.Bb(1),i.Bc(" ",r.value," ")}}var C,_=((C=function(){function t(e,n,r){_classCallCheck(this,t),this.learnService=e,this.router=n,this.utilsService=r,this.timeoutHolder=null}return _createClass(t,[{key:"onkeyup",value:function(t){[1,2,3,4,5].includes(+t.key)&&!this.isPauseBeforeStart&&this.onAnswer(this.options[+t.key-1])}},{key:"ngOnInit",value:function(){var t=this;this.initialieState(),this.wordsSubscription=this.learnService.wordsUpdateListener$.subscribe((function(e){t.words=e,t.currentWord=t.words[t.results.length],t.animationMove()})),this.learnService.getWordsToLearn(null,3),this.optionsSubscription=this.learnService.randomOptionsUpdateListener$.subscribe((function(e){t.options=e.map((function(t){return{value:t,isCorrect:!1}})),t.options.push({value:t.currentWord.russian.join(","),isCorrect:!0}),t.options=t.utilsService.shuffleArray(t.options)}))}},{key:"onAnswer",value:function(t){var e=this;if(!this.isPauseBeforeStart){if(clearTimeout(this.timeoutHolder),this.highlightCorrectAndClicked(t),this.isPauseBeforeStart=!0,this.addResult(t.isCorrect),this.results.length===this.words.length)return this.finishGame();this.state="start",this.getNextWord(),this.timeoutHolder=setTimeout((function(){return e.animationMove()}),1e3)}}},{key:"learnAgain",value:function(){this.initialieState(),this.learnService.getWordsToLearn(!1,3)}},{key:"requestNewOptions",value:function(){this.learnService.getRandomOptions(this.currentWord.russian,"russian")}},{key:"finishGame",value:function(){clearTimeout(this.timeoutHolder);var t=this.results.filter((function(t){return t.isCorrect})).map((function(t){return t.wordId}));this.learnService.toggleLearnings(t,!1,3,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Savannah",result:this.results}})}},{key:"highlightCorrectAndClicked",value:function(t){t.color="warn",this.options.find((function(t){return t.isCorrect})).color="primary"}},{key:"animationMove",value:function(){var t=this;this.requestNewOptions(),clearTimeout(this.timeoutHolder),this.isPauseBeforeStart=!1,this.state="move",this.timeoutHolder=setTimeout((function(){t.addResult(!1),t.getNextWord(),t.state="start",t.timeoutHolder=setTimeout((function(){return t.animationMove()}),1e3)}),5e3)}},{key:"addResult",value:function(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}},{key:"getNextWord",value:function(){this.currentWord=this.words[this.results.length]}},{key:"initialieState",value:function(){this.state="start",this.isPauseBeforeStart=!1,this.results=[],this.words=[],this.options=[],this.currentWord=null}},{key:"ngOnDestroy",value:function(){this.wordsSubscription.unsubscribe(),this.optionsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||C)(i.Nb(o.a),i.Nb(r.c),i.Nb(k.a))},C.\u0275cmp=i.Hb({type:C,selectors:[["app-savannah"]],hostBindings:function(t,e){1&t&&i.ac("keyup",(function(t){return e.onkeyup(t)}),!1,i.qc)},decls:6,vars:3,consts:[[1,"game"],[1,"game__gameplay"],[1,"options"],["class","option","mat-raised-button","",3,"color","click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"option",3,"color","click"]],template:function(t,e){1&t&&(i.Sb(0,"section",0),i.Sb(1,"div",1),i.Sb(2,"p"),i.zc(3),i.Rb(),i.Sb(4,"div",2),i.xc(5,w,2,3,"button",3),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.Bb(2),i.kc("@moveDown",e.state),i.Bb(1),i.Ac(null==e.currentWord?null:e.currentWord.english),i.Bb(2),i.kc("ngForOf",e.options))},directives:[s.k,y.b],styles:[".game[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:calc(100vh - 64px)}p[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translateX(-50%)}button[_ngcontent-%COMP%]{white-space:pre-wrap!important;display:block;margin-bottom:10px}mat-card[_ngcontent-%COMP%]{justify-content:space-between}.options[_ngcontent-%COMP%]{width:100%}.option[_ngcontent-%COMP%]{position:relative}.option[_ngcontent-%COMP%]:before{content:attr(data-before);position:absolute;left:-15px;color:grey;font-size:1em}"],data:{animation:[Object(v.n)("moveDown",[Object(v.k)("start",Object(v.l)({bottom:"calc(100vh - 100px)"})),Object(v.k)("move",Object(v.l)({bottom:0})),Object(v.m)("start => move",Object(v.e)(5e3))])]}}),C),S=n("tXUu"),O=n("f0Cb"),R=n("NFeN");function x(t,e){if(1&t){var n=i.Tb();i.Sb(0,"div",12),i.Sb(1,"button",13),i.ac("click",(function(){return i.rc(n),i.ec(2).onPronounce()})),i.Sb(2,"mat-icon"),i.zc(3,"volume_up"),i.Rb(),i.Rb(),i.Sb(4,"h3",14),i.zc(5),i.Rb(),i.Sb(6,"h4",15),i.zc(7),i.Rb(),i.Rb()}if(2&t){var r=i.ec(2);i.Bb(5),i.Ac(r.currentWord.english),i.Bb(2),i.Bc(" [",r.currentWord.transcription,"] ")}}function W(t,e){if(1&t&&(i.Sb(0,"span",14),i.zc(1),i.Rb()),2&t){var n=i.ec(2);i.Bb(1),i.Bc(" ",n.currentWord.russian.join(",")," ")}}function P(t,e){if(1&t){var n=i.Tb();i.Qb(0),i.Sb(1,"button",16),i.ac("click",(function(){i.rc(n);var t=e.$implicit;return i.ec(2).onAnswer(t)})),i.zc(2),i.Rb(),i.Pb()}if(2&t){var r=e.$implicit,o=e.index;i.Bb(1),i.kc("color",null==r?null:r.color),i.Cb("data-before",o+1),i.Bb(1),i.Bc(" ",r.value," ")}}function N(t,e){if(1&t){var n=i.Tb();i.Sb(0,"div",1),i.Sb(1,"p",2),i.zc(2),i.Rb(),i.Sb(3,"mat-card",3),i.Sb(4,"div",4),i.Sb(5,"div",5),i.xc(6,x,8,2,"div",6),i.xc(7,W,2,1,"span",7),i.Rb(),i.Sb(8,"div",8),i.xc(9,P,3,3,"ng-container",9),i.Rb(),i.Rb(),i.Ob(10,"mat-divider"),i.Sb(11,"mat-card-actions",10),i.Sb(12,"button",11),i.ac("click",(function(){return i.rc(n),i.ec().onNothing()})),i.zc(13),i.Rb(),i.Rb(),i.Rb(),i.Rb()}if(2&t){var r=i.ec();i.Bb(2),i.Ac(r.currentPlayNumber+" / "+r.words.length),i.Bb(4),i.kc("ngIf","word-translation"===r.gameName),i.Bb(1),i.kc("ngIf","translation-word"===r.gameName),i.Bb(2),i.kc("ngForOf",r.options),i.Bb(3),i.kc("color",r.isOptionClicked?"primary":"warn"),i.Bb(1),i.Bc(" ",r.isOptionClicked?"Continue":"I don't know"," ")}}var A,I=((A=function(){function t(e,n,r,i){_classCallCheck(this,t),this.route=e,this.learnService=n,this.utilsService=r,this.router=i,this.games={"word-translation":1,"translation-word":2},this.isOptionClicked=!1}return _createClass(t,[{key:"onkeyup",value:function(t){if([1,2,3,4,5].includes(+t.key)||"Enter"===t.key)return"Enter"===t.key?this.onNothing():void this.onAnswer(this.options[+t.key-1])}},{key:"ngOnInit",value:function(){var t=this;this.initializeState(),this.learnService.getWordsToLearn(null,this.games[this.gameName]),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe((function(e){t.words=e,t.requestNewRandomOptions()})),this.subscriptionOptions=this.learnService.randomOptionsUpdateListener$.subscribe((function(e){t.options=e.map((function(t){return{value:t,isCorrect:!1}})),t.shakeOptions(),1===t.games[t.gameName]&&t.onPronounce()}))}},{key:"onAnswer",value:function(t){this.isOptionClicked?(this.requestNewRandomOptions(),this.currentPlayNumber++):(2===this.games[this.gameName]&&this.onPronounce(),this.addResult(t.isCorrect),this.highlightCorrectAndChosenOption(t)),this.isOptionClicked=!this.isOptionClicked}},{key:"onNothing",value:function(){this.isOptionClicked?(this.requestNewRandomOptions(),this.currentPlayNumber++):(this.addResult(!1),2===this.games[this.gameName]&&(this.onPronounce(),this.highlightCorrectAndChosenOption())),this.isOptionClicked=!this.isOptionClicked}},{key:"onPronounce",value:function(){this.utilsService.onPronounce(this.currentWord.sound_url)}},{key:"learnAgain",value:function(){this.initializeState(),this.learnService.getWordsToLearn(null,this.games[this.gameName])}},{key:"addResult",value:function(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}},{key:"requestNewRandomOptions",value:function(){this.getNextWord();var t={"word-translation":"russian","translation-word":"english"}[this.gameName];this.currentWord&&this.learnService.getRandomOptions(this.currentWord[t],t)}},{key:"shakeOptions",value:function(){var t={value:"russian"==={"word-translation":"russian","translation-word":"english"}[this.gameName]?this.currentWord.russian.join(","):this.currentWord.english,isCorrect:!0},e=Math.floor(5*Math.random());this.options[4]=this.options[e],this.options[e]=t}},{key:"initializeState",value:function(){this.gameName=this.route.snapshot.data.gameName,this.results=[],this.words=[],this.currentWord=null,this.options=[],this.isOptionClicked=!1,this.currentPlayNumber=1}},{key:"highlightCorrectAndChosenOption",value:function(t){t&&(t.color="warn"),this.options.find((function(t){return t.isCorrect})).color="primary"}},{key:"finishGame",value:function(){var t=this.results.filter((function(t){return t.isCorrect})).map((function(t){return t.wordId}));this.learnService.toggleLearnings(t,!1,this.games[this.gameName],!1),this.router.navigate(["/learn/result"],{state:{gameName:this.gameName,result:this.results}})}},{key:"getNextWord",value:function(){this.words[this.results.length]||this.finishGame(),this.currentWord=this.words[this.results.length]}},{key:"ngOnDestroy",value:function(){this.subscriptionOptions.unsubscribe(),this.subscriptionWords.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||A)(i.Nb(r.a),i.Nb(o.a),i.Nb(k.a),i.Nb(r.c))},A.\u0275cmp=i.Hb({type:A,selectors:[["app-word-translation-word"]],hostBindings:function(t,e){1&t&&i.ac("keyup",(function(t){return e.onkeyup(t)}),!1,i.qc)},decls:2,vars:1,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"game__top"],[1,"game__left"],["class","word-translation",4,"ngIf"],["class","game__wordName",4,"ngIf"],[1,"game__right"],[4,"ngFor","ngForOf"],[1,"game__bottom"],["mat-raised-button","",1,"button-nothing",3,"color","click"],[1,"word-translation"],["mat-icon-button","",3,"click"],[1,"game__wordName"],[1,"game__transcription"],["mat-raised-button","",1,"game__option",3,"color","click"]],template:function(t,e){1&t&&(i.Sb(0,"app-centered-projection"),i.xc(1,N,14,6,"div",0),i.Rb()),2&t&&(i.Bb(1),i.kc("ngIf",e.currentWord))},directives:[S.a,s.l,a.a,s.k,O.a,a.b,y.b,R.a],styles:['.main-content[_ngcontent-%COMP%]{width:500px}.wordsCount[_ngcontent-%COMP%]{text-align:right}.game__top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:5px}.game__left[_ngcontent-%COMP%]{width:30%}.game__right[_ngcontent-%COMP%]{width:65%}.game__wordName[_ngcontent-%COMP%]{font-weight:500;overflow-wrap:break-word}.game__transcription[_ngcontent-%COMP%]{color:grey;font-weight:300}.game__option[_ngcontent-%COMP%]{width:100%;white-space:pre-wrap!important;position:relative}.game__option[_ngcontent-%COMP%]:nth-child(n+2){margin-top:5px}.game__option[_ngcontent-%COMP%]:before{content:attr(data-before);position:absolute;left:-15px;color:grey;font-size:1em}mat-card-actions[_ngcontent-%COMP%]{text-align:right}.button-nothing[_ngcontent-%COMP%]:before{content:"Enter";position:absolute;left:-40px;color:grey;font-size:1em;cursor:none}']}),A);function B(t,e){if(1&t&&(i.Sb(0,"p",11),i.zc(1),i.Rb()),2&t){var n=i.ec(2);i.Bb(1),i.Bc(" [",n.currentWord.transcription,"] ")}}function M(t,e){if(1&t&&(i.Sb(0,"span"),i.zc(1),i.Rb()),2&t){var n=e.$implicit;i.Bb(1),i.Ac(n)}}function z(t,e){if(1&t){var n=i.Tb();i.Sb(0,"button",12),i.ac("click",(function(){i.rc(n);var t=e.$implicit;return i.ec(2).chooseCharacter(t.value)})),i.zc(1),i.Rb()}if(2&t){var r=e.$implicit;i.wc("animation",r.highlight?"incorrect .5s":""),i.Bb(1),i.Bc(" ",r.value," ")}}function T(t,e){if(1&t){var n=i.Tb();i.Sb(0,"button",13),i.ac("click",(function(){return i.rc(n),i.ec(2).onNext()})),i.zc(1," Next "),i.Rb()}}function L(t,e){if(1&t&&(i.Sb(0,"div",1),i.Sb(1,"p",2),i.zc(2),i.Rb(),i.Sb(3,"mat-card",3),i.Sb(4,"h2",4),i.zc(5),i.Rb(),i.xc(6,B,2,1,"p",5),i.Sb(7,"div",6),i.xc(8,M,2,1,"span",7),i.Rb(),i.Sb(9,"div",8),i.xc(10,z,2,3,"button",9),i.Rb(),i.xc(11,T,2,0,"button",10),i.Rb(),i.Rb()),2&t){var n=i.ec();i.Bb(2),i.Ac(n.results.length+1+" / "+n.words.length),i.Bb(3),i.Ac(null==n.currentWord?null:n.currentWord.russian.join(",")),i.Bb(1),i.kc("ngIf",n.isAnswered),i.Bb(2),i.kc("ngForOf",n.englishWord),i.Bb(2),i.kc("ngForOf",n.characters),i.Bb(1),i.kc("ngIf",n.isAnswered)}}var j,F=((j=function(){function t(e,n,r){_classCallCheck(this,t),this.learnService=e,this.utilsService=n,this.router=r}return _createClass(t,[{key:"onkeyup",value:function(t){if("Enter"!==t.key){var e=(" "===t.key?"_":t.key).toUpperCase();this.characters.findIndex((function(t){return t.value===e}))<0||this.chooseCharacter(e)}else this.onNext()}},{key:"ngOnInit",value:function(){var t=this;this.initializeState(),this.learnService.getWordsToLearn(null,4),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe((function(e){t.words=e,t.getNextWord()}))}},{key:"chooseCharacter",value:function(t){var e=this;if(this.isItNextLetter(t)){this.englishWord[this.currentWord.english.length-this.characters.length]=t;var n=this.characters.findIndex((function(e){return e.value===t}));this.characters.splice(n,1)}else{if(1===this.mistakes)return this.addResult(!1),void this.getNextWord();this.mistakes++;var r=this.characters.findIndex((function(e){return e.value===t}));this.characters[r].highlight=!0,setTimeout((function(){return e.characters[r].highlight=!1}),500)}0===this.characters.length&&(this.onPronounce(),this.isAnswered=!0)}},{key:"learnAgain",value:function(){this.initializeState(),this.learnService.getWordsToLearn(null,4)}},{key:"onPronounce",value:function(){this.utilsService.onPronounce(this.currentWord.sound_url)}},{key:"onNext",value:function(){this.isAnswered&&(this.addResult(!0),this.getNextWord(),this.isAnswered=!1)}},{key:"finishGame",value:function(){var t=this.results.filter((function(t){return t.isCorrect})).map((function(t){return t.wordId}));this.learnService.toggleLearnings(t,!1,4,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Word constructor",result:this.results}})}},{key:"getNextWord",value:function(){this.mistakes=0,this.currentWord=this.words[this.results.length],this.currentWord?(this.englishWord=Array(this.currentWord.english.length),this.characters=this.calculateCharacters(this.currentWord.english)):this.finishGame()}},{key:"calculateCharacters",value:function(t){var e,n=[],r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push({value:i.trim().toUpperCase()||"_",highlight:!1})}}catch(o){r.e(o)}finally{r.f()}return n=this.utilsService.shuffleArray(n)}},{key:"isItNextLetter",value:function(t){return"_"===t&&(t=" "),this.currentWord.english[this.currentWord.english.length-this.characters.length].toUpperCase()===t}},{key:"initializeState",value:function(){this.results=[],this.words=[],this.currentWord=null,this.englishWord=[],this.characters=[],this.mistakes=0,this.isAnswered=!1}},{key:"addResult",value:function(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}},{key:"ngOnDestroy",value:function(){this.subscriptionWords.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||j)(i.Nb(o.a),i.Nb(k.a),i.Nb(r.c))},j.\u0275cmp=i.Hb({type:j,selectors:[["app-word-constructor"]],hostBindings:function(t,e){1&t&&i.ac("keyup",(function(t){return e.onkeyup(t)}),!1,i.qc)},decls:2,vars:1,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"game__word"],["class","transcription",4,"ngIf"],[1,"characters-holder"],[4,"ngFor","ngForOf"],[1,"characters"],["mat-stroked-button","","color","primary",3,"animation","click",4,"ngFor","ngForOf"],["mat-raised-button","",3,"click",4,"ngIf"],[1,"transcription"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(i.Sb(0,"app-centered-projection"),i.xc(1,L,12,6,"div",0),i.Rb()),2&t&&(i.Bb(1),i.kc("ngIf",e.currentWord))},directives:[S.a,s.l,a.a,s.k,y.b],styles:[".transcription[_ngcontent-%COMP%]{color:grey}.main-content[_ngcontent-%COMP%]{width:600px;height:300px;margin:0 auto}.game[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center}.wordsCount[_ngcontent-%COMP%]{text-align:end}.characters-holder[_ngcontent-%COMP%]{margin:15px 0}.characters-holder[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{display:flex;justify-content:center}span[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid #000;border-radius:2px;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}span[_ngcontent-%COMP%]:nth-child(n+2){margin-left:2px}@-webkit-keyframes incorrect{0%{background:initial}50%{background:red}to{background:initial}}@keyframes incorrect{0%{background:initial}50%{background:red}to{background:initial}}"]}),j),$=n("kmnG"),H=n("qFsG"),U=n("3Pt+"),q=["input"];function E(t,e){if(1&t){var n=i.Tb();i.Sb(0,"mat-form-field",8),i.Sb(1,"mat-label"),i.zc(2,"Type word here"),i.Rb(),i.Sb(3,"input",9,10),i.ac("ngModelChange",(function(t){return i.rc(n),i.ec().inputValue=t})),i.Rb(),i.Rb()}if(2&t){var r=i.ec();i.Bb(3),i.kc("ngModel",r.inputValue)}}function G(t,e){if(1&t&&(i.Sb(0,"p",15),i.zc(1),i.Rb()),2&t){var n=i.ec(2);i.Bb(1),i.Bc(" ",n.inputValue," ")}}function V(t,e){if(1&t&&(i.Sb(0,"div",11),i.Sb(1,"p",12),i.zc(2),i.Rb(),i.xc(3,G,2,1,"p",13),i.Sb(4,"p",14),i.zc(5),i.Rb(),i.Sb(6,"p"),i.zc(7),i.Rb(),i.Sb(8,"p"),i.zc(9),i.Rb(),i.Rb()),2&t){var n=i.ec();i.Bb(2),i.Ac(n.currentWord.english),i.Bb(1),i.kc("ngIf",n.inputValue.toUpperCase()!==n.currentWord.english.toUpperCase()),i.Bb(2),i.Bc("[",n.currentWord.transcription,"]"),i.Bb(2),i.Ac(n.currentWord.russian.join(",")),i.Bb(2),i.Ac(n.currentWord.text)}}var D,Q=((D=function(){function t(e,n,r){_classCallCheck(this,t),this.learnService=e,this.utilsService=n,this.router=r}return _createClass(t,[{key:"onkeyup",value:function(t){"Enter"===t.key&&this.onEnterClick()}},{key:"ngOnInit",value:function(){var t=this;this.initializeState(),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe((function(e){t.words=e,t.getNextWord()})),this.learnService.getWordsToLearn(!1,5)}},{key:"onEnterAnswer",value:function(){this.isAnswered=!0;var t={wordId:this.currentWord.id,isCorrect:this.inputValue.toUpperCase()===this.currentWord.english.toUpperCase()};this.results.push(t)}},{key:"onEnterClick",value:function(){if(this.isAnswered)return this.getNextWord(),void(this.isAnswered=!1);this.onEnterAnswer()}},{key:"onPronounce",value:function(){this.utilsService.onPronounce(this.currentWord.sound_url)}},{key:"learnAgain",value:function(){this.initializeState(),this.learnService.getWordsToLearn(!1,5)}},{key:"getNextWord",value:function(){var t=this;this.currentWord=this.words[this.results.length],this.currentWord?(this.inputValue="",this.onPronounce(),setTimeout((function(){return t.inputPlaceholder.focus()}),0)):this.finishGame()}},{key:"finishGame",value:function(){var t=this.results.filter((function(t){return t.isCorrect})).map((function(t){return t.wordId}));this.learnService.toggleLearnings(t,!1,5,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Listening",result:this.results}})}},{key:"initializeState",value:function(){this.words=[],this.currentWord=null,this.results=[],this.inputValue="",this.isAnswered=!1}},{key:"ngOnDestroy",value:function(){this.subscriptionWords.unsubscribe()}},{key:"input",set:function(t){t&&(this.inputPlaceholder=t.nativeElement)}}]),t}()).\u0275fac=function(t){return new(t||D)(i.Nb(o.a),i.Nb(k.a),i.Nb(r.c))},D.\u0275cmp=i.Hb({type:D,selectors:[["app-listening"]],viewQuery:function(t,e){var n;1&t&&i.Dc(q,!0),2&t&&i.nc(n=i.bc())&&(e.input=n.first)},hostBindings:function(t,e){1&t&&i.ac("keyup",(function(t){return e.onkeyup(t)}),!1,i.qc)},decls:13,vars:3,consts:[[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"btn--pronounce"],["mat-fab","","color","primary",3,"click"],["class","input",4,"ngIf"],["class","show",4,"ngIf"],["mat-raised-button","",3,"click"],[1,"input"],["matInput","",3,"ngModel","ngModelChange"],["input",""],[1,"show"],[1,"show__wordCorrect"],["class","show__wordIncorrect",4,"ngIf"],[1,"show__transcription"],[1,"show__wordIncorrect"]],template:function(t,e){1&t&&(i.Sb(0,"app-centered-projection"),i.Sb(1,"div",0),i.Sb(2,"p",1),i.zc(3),i.Rb(),i.Sb(4,"mat-card",2),i.Sb(5,"h2",3),i.Sb(6,"button",4),i.ac("click",(function(){return e.onPronounce()})),i.Sb(7,"mat-icon"),i.zc(8,"volume_up"),i.Rb(),i.Rb(),i.Rb(),i.xc(9,E,5,1,"mat-form-field",5),i.xc(10,V,10,5,"div",6),i.Sb(11,"button",7),i.ac("click",(function(){return e.onEnterClick()})),i.zc(12,"Enter"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.Bb(3),i.Ac(e.results.length+1+" / "+e.words.length),i.Bb(6),i.kc("ngIf",!e.isAnswered),i.Bb(1),i.kc("ngIf",e.isAnswered))},directives:[S.a,a.a,y.b,R.a,s.l,$.c,$.f,H.a,U.b,U.l,U.o],styles:[".main-content[_ngcontent-%COMP%]{width:500px}.wordsCount[_ngcontent-%COMP%]{text-align:right}.btn--pronounce[_ngcontent-%COMP%]{text-align:center}.input[_ngcontent-%COMP%]{margin:50px 0;width:100%}.game[_ngcontent-%COMP%]{width:100%;height:100%}.show[_ngcontent-%COMP%]{text-align:center}.show__wordCorrect[_ngcontent-%COMP%]{font-size:18px;color:green}.show__wordIncorrect[_ngcontent-%COMP%]{color:red}.show__transcription[_ngcontent-%COMP%]{color:grey}"]}),D);function J(t,e){if(1&t&&(i.Sb(0,"p",7),i.zc(1),i.Rb()),2&t){var n=i.ec().$implicit;i.Bb(1),i.Bc(" ",n.russian.join(",")," ")}}function K(t,e){if(1&t){var n=i.Tb();i.Sb(0,"button",8),i.ac("click",(function(){i.rc(n);var t=i.ec().$implicit;return i.ec().addResult(t,!0)})),i.zc(1," I know "),i.Rb()}}function X(t,e){if(1&t){var n=i.Tb();i.Sb(0,"button",9),i.ac("click",(function(){i.rc(n);var t=i.ec().$implicit;return i.ec().addResult(t,!1)})),i.zc(1," I don't know "),i.Rb()}}function Y(t,e){if(1&t){var n=i.Tb();i.Sb(0,"mat-card"),i.Sb(1,"h2"),i.zc(2),i.Rb(),i.xc(3,J,2,1,"p",2),i.Sb(4,"button",3),i.ac("click",(function(){i.rc(n);var t=e.$implicit;return i.ec().onPronounce(t.sound_url)})),i.Sb(5,"mat-icon"),i.zc(6,"volume_up"),i.Rb(),i.Rb(),i.Sb(7,"p",4),i.zc(8),i.Rb(),i.Sb(9,"mat-card-actions"),i.xc(10,K,2,0,"button",5),i.xc(11,X,2,0,"button",6),i.Rb(),i.Rb()}if(2&t){var r=e.$implicit,o=i.ec();i.wc("border",o.checkedWords[r.id]),i.Bb(2),i.Ac(r.english),i.Bb(1),i.kc("ngIf",o.checkedWords[r.id]),i.Bb(5),i.Bc("[",r.transcription,"]"),i.Bb(2),i.kc("ngIf",!o.checkedWords[r.id]),i.Bb(1),i.kc("ngIf",!o.checkedWords[r.id])}}var Z,tt,et=((tt=function(){function t(e,n,r){_classCallCheck(this,t),this.learnService=e,this.utilsService=n,this.router=r,this.checkedWords={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.initializeState(),this.words$=this.learnService.wordsUpdateListener$.pipe(Object(g.a)((function(e){return t.wordsLength=e.length}))),this.learnService.getWordsToLearn(!1,6)}},{key:"onPronounce",value:function(t){this.utilsService.onPronounce(t)}},{key:"addResult",value:function(t,e){var n={wordId:t.id,isCorrect:e};this.checkedWords[t.id]=e?"1px solid green":"1px solid red",this.onPronounce(t.sound_url),this.results.push(n),this.results.length===this.wordsLength&&this.finishGame()}},{key:"learnAgain",value:function(){this.initializeState(),this.learnService.getWordsToLearn(!1,6)}},{key:"finishGame",value:function(){var t=this.results.filter((function(t){return t.isCorrect})).map((function(t){return t.wordId}));this.learnService.toggleLearnings(t,!1,6,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Word cards",result:this.results}})}},{key:"initializeState",value:function(){this.results=[],this.wordsLength=0,this.checkedWords={}}}]),t}()).\u0275fac=function(t){return new(t||tt)(i.Nb(o.a),i.Nb(k.a),i.Nb(r.c))},tt.\u0275cmp=i.Hb({type:tt,selectors:[["app-word-cards"]],decls:3,vars:3,consts:[[1,"main-content"],[3,"border",4,"ngFor","ngForOf"],["class","translation",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"transcription"],["mat-raised-button","","class","btn","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","class","btn idk",3,"click",4,"ngIf"],[1,"translation"],["mat-raised-button","","color","primary",1,"btn",3,"click"],["mat-raised-button","",1,"btn","idk",3,"click"]],template:function(t,e){1&t&&(i.Sb(0,"div",0),i.xc(1,Y,12,7,"mat-card",1),i.fc(2,"async"),i.Rb()),2&t&&(i.Bb(1),i.kc("ngForOf",i.gc(2,1,e.words$)))},directives:[s.k,a.a,s.l,y.b,R.a,a.b],pipes:[s.b],styles:[".main-content[_ngcontent-%COMP%]{width:80%;margin:0 auto;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:20px}mat-card[_ngcontent-%COMP%]{width:200px;display:flex;flex-direction:column;align-items:center}.transcription[_ngcontent-%COMP%]{color:grey}.btn[_ngcontent-%COMP%]{display:block;margin:0!important}.btn[_ngcontent-%COMP%], mat-card-actions[_ngcontent-%COMP%]{width:100%}.idk[_ngcontent-%COMP%]{margin-top:10px}"]}),tt),nt=((Z=function(){function t(e){_classCallCheck(this,t),this.learnService=e}return _createClass(t,[{key:"resolve",value:function(){return this.learnService.getQuantities()}}]),t}()).\u0275fac=function(t){return new(t||Z)(i.Wb(o.a))},Z.\u0275prov=i.Jb({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z),rt=n("Qu3c");function it(t,e){if(1&t){var n=i.Tb();i.Sb(0,"button",7),i.ac("click",(function(){return i.rc(n),i.ec().onClick()})),i.zc(1," Learn more "),i.Rb()}}var ot,st,at,ct,ut=[{path:"",component:f,resolve:{quantities:nt}},{path:"word-translation",component:I,canActivate:[m],data:{gameName:"word-translation"}},{path:"translation-word",component:I,canActivate:[m],data:{gameName:"translation-word"}},{path:"savannah",component:_,canActivate:[m]},{path:"word_constructor",component:F,canActivate:[m]},{path:"listening",component:Q,canActivate:[m]},{path:"word_cards",component:et,canActivate:[m]},{path:"result",component:(st=function(){function t(e,n){_classCallCheck(this,t),this.location=e,this.router=n}return _createClass(t,[{key:"onkeyup",value:function(t){"Enter"===t.key&&(12===this.results.length?this.onClick():this.router.navigate(["/learn"]))}},{key:"ngOnInit",value:function(){var t;this.results=window.history.state.result,t=_slicedToArray(this.calculateCorrectAndIncorrect(this.results),2),this.correct=t[0],this.incorrect=t[1]}},{key:"onClick",value:function(){this.location.back()}},{key:"calculateCorrectAndIncorrect",value:function(t){var e,n=0,r=0,i=_createForOfIteratorHelper(this.results);try{for(i.s();!(e=i.n()).done;)e.value.isCorrect?n++:r++}catch(o){i.e(o)}finally{i.f()}return[n,r]}}]),t}(),st.\u0275fac=function(t){return new(t||st)(i.Nb(s.h),i.Nb(r.c))},st.\u0275cmp=i.Hb({type:st,selectors:[["app-results"]],hostBindings:function(t,e){1&t&&i.ac("keyup",(function(t){return e.onkeyup(t)}),!1,i.qc)},decls:11,vars:8,consts:[[1,"result"],[1,"visual"],[1,"correct",3,"matTooltip"],[1,"incorrect",3,"matTooltip"],[1,"buttons"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","routerLink","/learn"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(i.Sb(0,"app-centered-projection"),i.Sb(1,"mat-card",0),i.Sb(2,"h2"),i.zc(3),i.Rb(),i.Sb(4,"div",1),i.Ob(5,"div",2),i.Ob(6,"div",3),i.Rb(),i.Sb(7,"div",4),i.xc(8,it,2,0,"button",5),i.Sb(9,"button",6),i.zc(10,"Go to training"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.Bb(3),i.Bc("",e.results.length," words"),i.Bb(2),i.wc("width",e.correct/e.results.length*100+"%"),i.kc("matTooltip",e.correct+" correct words"),i.Bb(1),i.wc("width",e.incorrect/e.results.length*100+"%"),i.kc("matTooltip",e.incorrect+" incorrect words"),i.Bb(2),i.kc("ngIf",12===e.results.length))},directives:[S.a,a.a,rt.a,s.l,y.b,r.d],styles:[".result[_ngcontent-%COMP%]{width:200px;text-align:center}.correct[_ngcontent-%COMP%]{background:#1aff1a;height:20px}.incorrect[_ngcontent-%COMP%]{margin-top:20px;background:#f99;height:20px}.buttons[_ngcontent-%COMP%]{margin-top:50px}"]}),st),canActivate:[(ot=function(){function t(e){_classCallCheck(this,t),this.router=e}return _createClass(t,[{key:"canActivate",value:function(){var t=this.router.getCurrentNavigation().extras;if(t.state&&t.state.gameName&&t.state.result)return!0;this.router.navigate(["/learn"])}}]),t}(),ot.\u0275fac=function(t){return new(t||ot)(i.Wb(r.c))},ot.\u0275prov=i.Jb({token:ot,factory:ot.\u0275fac,providedIn:"root"}),ot)]}],lt=((at=function t(){_classCallCheck(this,t)}).\u0275mod=i.Lb({type:at}),at.\u0275inj=i.Kb({factory:function(t){return new(t||at)},imports:[[r.g.forChild(ut)],r.g]}),at),ht=n("PCNd"),dt=((ct=function t(){_classCallCheck(this,t)}).\u0275mod=i.Lb({type:ct}),ct.\u0275inj=i.Kb({factory:function(t){return new(t||ct)},providers:[nt],imports:[[lt,ht.a]]}),ct)}}]);