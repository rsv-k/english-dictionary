(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Tur3:function(t,e,n){"use strict";n.r(e),n.d(e,"LearnModule",(function(){return ht}));var i=n("tyNb"),r=n("fXoL"),s=n("GOW1"),o=n("kmnG"),c=n("ofXK"),a=n("d3UM"),l=n("FKr1"),u=n("Wp6s");function h(t,e){if(1&t&&(r.Sb(0,"mat-card-subtitle"),r.Ac(1),r.Rb()),2&t){const t=r.ec();r.Bb(1),r.Cc(" ",t.wordsAmount," words to learn ")}}let d=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-learn-game-card"]],inputs:{title:"title",wordsAmount:"wordsAmount"},decls:5,vars:2,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(r.Sb(0,"mat-card"),r.Sb(1,"mat-card-header"),r.Sb(2,"mat-card-title"),r.Ac(3),r.Rb(),r.yc(4,h,2,1,"mat-card-subtitle",0),r.Rb(),r.Rb()),2&t&&(r.Bb(3),r.Cc(" ",e.title," "),r.Bb(1),r.kc("ngIf",e.wordsAmount))},directives:[u.a,u.d,u.g,c.l,u.f],styles:["mat-card[_ngcontent-%COMP%]{height:calc(100% - 32px);margin-bottom:10px;cursor:pointer;transition:.5s}mat-card[_ngcontent-%COMP%]:hover{background:#f2f2f2}"]}),t})();function b(t,e){1&t&&(r.Sb(0,"mat-label"),r.Ac(1,"All words"),r.Rb())}function g(t,e){if(1&t&&(r.Sb(0,"mat-option",7),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.kc("value",t.title),r.Bb(1),r.Cc(" ",t.title," ")}}function p(t,e){if(1&t){const t=r.Tb();r.Sb(0,"app-learn-game-card",8),r.ac("click",(function(){r.sc(t);const n=e.$implicit;return r.ec().onNavigate(n)})),r.Rb()}if(2&t){const t=e.$implicit;r.kc("title",t.title)("wordsAmount",t.wordsQuantity)}}let m=(()=>{class t{constructor(t,e,n){this.learnService=t,this.route=e,this.router=n,this.games=[]}ngOnInit(){this.route.data.subscribe(t=>{this.sets=[{title:"All words"},...t.data.sets],this.setGames(t.data.quantities)})}onSelectionChange(t){this.gamesSub&&this.gamesSub.unsubscribe();const e=this.sets.find(e=>e.title===t);this.selectedSet=e,this.learnService.getQuantities(e.id?e.id:null).subscribe(t=>{this.setGames(t)})}onNavigate(t){const e=t.title.split(" ").join("_").toLowerCase();let n={};this.selectedSet&&this.selectedSet.id&&(n={setId:this.selectedSet.id}),this.router.navigate(["/learn/"+e],{queryParams:n})}ngOnDestroy(){this.gamesSub&&this.gamesSub.unsubscribe()}setGames(t){const e=this.learnService.getAvailableGames(),n=[];for(let i=0;i<t.length;i++)n.push({title:e[i],wordsQuantity:+t[i]});this.games=n}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(i.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-learn"]],decls:11,vars:3,consts:[[1,"learn"],[4,"ngIf"],[3,"selectionChange"],["selection",""],[3,"value",4,"ngFor","ngForOf"],[1,"games"],[3,"title","wordsAmount","click",4,"ngFor","ngForOf"],[3,"value"],[3,"title","wordsAmount","click"]],template:function(t,e){if(1&t){const t=r.Tb();r.Sb(0,"section",0),r.Sb(1,"header"),r.Sb(2,"h1"),r.Ac(3,"Training"),r.Rb(),r.Sb(4,"mat-form-field"),r.yc(5,b,2,0,"mat-label",1),r.Sb(6,"mat-select",2,3),r.ac("selectionChange",(function(){r.sc(t);const n=r.pc(7);return e.onSelectionChange(n.value)})),r.yc(8,g,2,2,"mat-option",4),r.Rb(),r.Rb(),r.Rb(),r.Sb(9,"main",5),r.yc(10,p,1,2,"app-learn-game-card",6),r.Rb(),r.Rb()}if(2&t){const t=r.pc(7);r.Bb(5),r.kc("ngIf",!t.value),r.Bb(3),r.kc("ngForOf",e.sets),r.Bb(2),r.kc("ngForOf",e.games)}},directives:[o.c,c.l,a.a,c.k,o.f,l.f,d],styles:[".learn[_ngcontent-%COMP%]{width:60%;margin:0 auto}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.games[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:repeat(4,120px);grid-gap:15px}app-learn-game-card[_ngcontent-%COMP%]:focus{outline:0}app-learn-game-card[_ngcontent-%COMP%]:nth-child(3){grid-row-start:2;grid-row-end:4;grid-column-start:1;grid-column-end:2}app-learn-game-card[_ngcontent-%COMP%]:nth-child(7){grid-row-start:1;grid-row-end:5;grid-column-start:3;grid-column-end:3}app-learn-game-card[_ngcontent-%COMP%]:nth-child(6){grid-row-start:4;grid-row-end:5;grid-column-start:1;grid-column-end:3}"]}),t})();var f=n("lJxs"),w=n("vkgz");let v=(()=>{class t{constructor(t,e){this.learnService=t,this.router=e}canActivate(t,e){let n=t.routeConfig.path.split("_").join(" ");n=n[0].toUpperCase()+n.slice(1).toLowerCase();const i=this.learnService.getAvailableGames().findIndex(t=>t===n);return this.learnService.getQuantities(t.queryParams.setId).pipe(Object(f.a)(t=>!!t[i]),Object(w.a)(t=>{t||this.router.navigate(["/learn"])}))}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s.a),r.Wb(i.c))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=n("R0Ic"),C=n("OiFK"),k=n("bTqV");function O(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",4),r.ac("click",(function(){r.sc(t);const n=e.$implicit;return r.ec().onAnswer(n,n.isCorrect)})),r.Ac(1),r.Rb()}if(2&t){const t=e.$implicit,n=e.index;r.kc("color",null==t?null:t.color),r.Cb("data-before",n+1),r.Bb(1),r.Cc(" ",t.value," ")}}let _=(()=>{class t{constructor(t,e,n){this.learnService=t,this.router=e,this.utilsService=n,this.state="start",this.isPauseBeforeStart=!1,this.results=[],this.timeoutHolder=null}onkeyup(t){if([1,2,3,4,5].includes(+t.key)&&!this.isPauseBeforeStart){const e=this.options[+t.key-1];this.onAnswer(e,e.isCorrect)}}ngOnInit(){this.learnService.getWordsToLearn(null,3),this.wordsSubscription=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.getNextWord(),this.requestNewOptions()}),this.optionsSubscription=this.learnService.randomOptionsUpdateListener$.subscribe(t=>{this.options=t.map(t=>({value:t,isCorrect:!1})),this.options.push({value:this.currentWord.russian.join(","),isCorrect:!0}),this.options=this.utilsService.shuffleArray(this.options),this.animationMove()})}onAnswer(t,e){if(!this.isPauseBeforeStart){if(clearTimeout(this.timeoutHolder),this.highlightCorrectAndClicked(t),this.isPauseBeforeStart=!0,this.addResult(e),this.getNextWord(),!this.currentWord)return this.finishGame();this.state="start",this.timeoutHolder=setTimeout(()=>{this.animationMove(),this.requestNewOptions()},1e3)}}requestNewOptions(){this.learnService.getRandomOptions(this.currentWord.russian,"russian")}finishGame(){clearTimeout(this.timeoutHolder);const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,3,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Savannah",result:this.results}})}highlightCorrectAndClicked(t){t.color="warn",this.highlightCorrect()}highlightCorrect(){this.options.find(t=>t.isCorrect).color="primary"}animationMove(){clearTimeout(this.timeoutHolder),this.isPauseBeforeStart=!1,this.state="move",this.timeoutHolder=setTimeout(()=>{const t=this.options.find(t=>t.isCorrect);this.onAnswer(t,!1)},5e3)}addResult(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}getNextWord(){this.currentWord=this.words[this.results.length]}ngOnDestroy(){this.wordsSubscription.unsubscribe(),this.optionsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(i.c),r.Nb(C.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-savannah"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.rc)},decls:6,vars:3,consts:[[1,"game"],[1,"game__gameplay"],[1,"options"],["class","option","mat-raised-button","",3,"color","click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"option",3,"color","click"]],template:function(t,e){1&t&&(r.Sb(0,"section",0),r.Sb(1,"div",1),r.Sb(2,"p"),r.Ac(3),r.Rb(),r.Sb(4,"div",2),r.yc(5,O,2,3,"button",3),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(2),r.kc("@moveDown",e.state),r.Bb(1),r.Bc(null==e.currentWord?null:e.currentWord.english),r.Bb(2),r.kc("ngForOf",e.options))},directives:[c.k,k.b],styles:[".game[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:calc(100vh - 64px)}p[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translateX(-50%)}button[_ngcontent-%COMP%]{white-space:pre-wrap!important;display:block;margin-bottom:10px}mat-card[_ngcontent-%COMP%]{justify-content:space-between}.options[_ngcontent-%COMP%]{width:100%}.option[_ngcontent-%COMP%]{position:relative}.option[_ngcontent-%COMP%]:before{content:attr(data-before);position:absolute;left:-15px;color:grey;font-size:1em}"],data:{animation:[Object(S.n)("moveDown",[Object(S.k)("start",Object(S.l)({bottom:"calc(100vh - 100px)"})),Object(S.k)("move",Object(S.l)({bottom:0})),Object(S.m)("start => move",Object(S.e)(5e3))])]}}),t})();var y=n("tXUu"),R=n("f0Cb"),P=n("NFeN");function A(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",12),r.Sb(1,"button",13),r.ac("click",(function(){return r.sc(t),r.ec(2).onPronounce()})),r.Sb(2,"mat-icon"),r.Ac(3,"volume_up"),r.Rb(),r.Rb(),r.Sb(4,"h3",14),r.Ac(5),r.Rb(),r.Sb(6,"h4",15),r.Ac(7),r.Rb(),r.Rb()}if(2&t){const t=r.ec(2);r.Bb(5),r.Bc(t.currentWord.english),r.Bb(2),r.Cc(" [",t.currentWord.transcription,"] ")}}function W(t,e){if(1&t&&(r.Sb(0,"span",14),r.Ac(1),r.Rb()),2&t){const t=r.ec(2);r.Bb(1),r.Cc(" ",t.currentWord.russian.join(",")," ")}}function x(t,e){if(1&t){const t=r.Tb();r.Qb(0),r.Sb(1,"button",16),r.ac("click",(function(){r.sc(t);const n=e.$implicit;return r.ec(2).onAnswer(n)})),r.Ac(2),r.Rb(),r.Pb()}if(2&t){const t=e.$implicit,n=e.index;r.Bb(1),r.kc("color",null==t?null:t.color),r.Cb("data-before",n+1),r.Bb(1),r.Cc(" ",t.value," ")}}function N(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",1),r.Sb(1,"p",2),r.Ac(2),r.Rb(),r.Sb(3,"mat-card",3),r.Sb(4,"div",4),r.Sb(5,"div",5),r.yc(6,A,8,2,"div",6),r.yc(7,W,2,1,"span",7),r.Rb(),r.Sb(8,"div",8),r.yc(9,x,3,3,"ng-container",9),r.Rb(),r.Rb(),r.Ob(10,"mat-divider"),r.Sb(11,"mat-card-actions",10),r.Sb(12,"button",11),r.ac("click",(function(){return r.sc(t),r.ec().onNothing()})),r.Ac(13),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&t){const t=r.ec();r.Bb(2),r.Bc(t.currentPlayNumber+" / "+t.words.length),r.Bb(4),r.kc("ngIf","word-translation"===t.gameName),r.Bb(1),r.kc("ngIf","translation-word"===t.gameName),r.Bb(2),r.kc("ngForOf",t.options),r.Bb(3),r.kc("color",t.isOptionClicked?"primary":"warn"),r.Bb(1),r.Cc(" ",t.isOptionClicked?"Continue":"I don't know"," ")}}let B=(()=>{class t{constructor(t,e,n,i){this.route=t,this.learnService=e,this.utilsService=n,this.router=i,this.games={"word-translation":1,"translation-word":2},this.isOptionClicked=!1}onkeyup(t){if([1,2,3,4,5].includes(+t.key)||"Enter"===t.key)return"Enter"===t.key?this.onNothing():void this.onAnswer(this.options[+t.key-1])}ngOnInit(){this.initializeState(),this.learnService.getWordsToLearn(null,this.games[this.gameName],this.route.snapshot.queryParams.setId),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.requestNewRandomOptions()}),this.subscriptionOptions=this.learnService.randomOptionsUpdateListener$.subscribe(t=>{this.options=t.map(t=>({value:t,isCorrect:!1})),this.shakeOptions(),1===this.games[this.gameName]&&this.onPronounce()})}onAnswer(t){this.isOptionClicked?(this.requestNewRandomOptions(),this.currentPlayNumber++):(2===this.games[this.gameName]&&this.onPronounce(),this.addResult(t.isCorrect),this.highlightCorrectAndChosenOption(t)),this.isOptionClicked=!this.isOptionClicked}onNothing(){this.isOptionClicked?(this.requestNewRandomOptions(),this.currentPlayNumber++):(this.addResult(!1),2===this.games[this.gameName]&&(this.onPronounce(),this.highlightCorrectAndChosenOption())),this.isOptionClicked=!this.isOptionClicked}onPronounce(){this.utilsService.onPronounce(this.currentWord.sound_url)}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(null,this.games[this.gameName])}addResult(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}requestNewRandomOptions(){this.getNextWord();const t={"word-translation":"russian","translation-word":"english"}[this.gameName];this.currentWord&&this.learnService.getRandomOptions(this.currentWord[t],t)}shakeOptions(){const t={value:"russian"==={"word-translation":"russian","translation-word":"english"}[this.gameName]?this.currentWord.russian.join(","):this.currentWord.english,isCorrect:!0},e=Math.floor(5*Math.random());this.options[4]=this.options[e],this.options[e]=t}initializeState(){this.gameName=this.route.snapshot.data.gameName,this.results=[],this.words=[],this.currentWord=null,this.options=[],this.isOptionClicked=!1,this.currentPlayNumber=1}highlightCorrectAndChosenOption(t){t&&(t.color="warn"),this.options.find(t=>t.isCorrect).color="primary"}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,this.games[this.gameName],!1),this.router.navigate(["/learn/result"],{state:{gameName:this.gameName,result:this.results}})}getNextWord(){this.words[this.results.length]||this.finishGame(),this.currentWord=this.words[this.results.length]}ngOnDestroy(){this.subscriptionOptions.unsubscribe(),this.subscriptionWords.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(s.a),r.Nb(C.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-word-translation-word"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.rc)},decls:2,vars:1,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"game__top"],[1,"game__left"],["class","word-translation",4,"ngIf"],["class","game__wordName",4,"ngIf"],[1,"game__right"],[4,"ngFor","ngForOf"],[1,"game__bottom"],["mat-raised-button","",1,"button-nothing",3,"color","click"],[1,"word-translation"],["mat-icon-button","",3,"click"],[1,"game__wordName"],[1,"game__transcription"],["mat-raised-button","",1,"game__option",3,"color","click"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.yc(1,N,14,6,"div",0),r.Rb()),2&t&&(r.Bb(1),r.kc("ngIf",e.currentWord))},directives:[y.a,c.l,u.a,c.k,R.a,u.b,k.b,P.a],styles:['.main-content[_ngcontent-%COMP%]{width:500px}.wordsCount[_ngcontent-%COMP%]{text-align:right}.game__top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:5px}.game__left[_ngcontent-%COMP%]{width:30%}.game__right[_ngcontent-%COMP%]{width:65%}.game__wordName[_ngcontent-%COMP%]{font-weight:500;overflow-wrap:break-word}.game__transcription[_ngcontent-%COMP%]{color:grey;font-weight:300}.game__option[_ngcontent-%COMP%]{width:100%;white-space:pre-wrap!important;position:relative}.game__option[_ngcontent-%COMP%]:nth-child(n+2){margin-top:5px}.game__option[_ngcontent-%COMP%]:before{content:attr(data-before);position:absolute;left:-15px;color:grey;font-size:1em}mat-card-actions[_ngcontent-%COMP%]{text-align:right}.button-nothing[_ngcontent-%COMP%]:before{content:"Enter";position:absolute;left:-40px;color:grey;font-size:1em;cursor:none}']}),t})();function I(t,e){if(1&t&&(r.Sb(0,"p",11),r.Ac(1),r.Rb()),2&t){const t=r.ec(2);r.Bb(1),r.Cc(" [",t.currentWord.transcription,"] ")}}function M(t,e){if(1&t&&(r.Sb(0,"span"),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(t)}}function L(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",12),r.ac("click",(function(){r.sc(t);const n=e.$implicit;return r.ec(2).chooseCharacter(n.value)})),r.Ac(1),r.Rb()}if(2&t){const t=e.$implicit;r.xc("animation",t.highlight?"incorrect .5s":""),r.Bb(1),r.Cc(" ",t.value," ")}}function T(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",13),r.ac("click",(function(){return r.sc(t),r.ec(2).onNext()})),r.Ac(1," Next "),r.Rb()}}function j(t,e){if(1&t&&(r.Sb(0,"div",1),r.Sb(1,"p",2),r.Ac(2),r.Rb(),r.Sb(3,"mat-card",3),r.Sb(4,"h2",4),r.Ac(5),r.Rb(),r.yc(6,I,2,1,"p",5),r.Sb(7,"div",6),r.yc(8,M,2,1,"span",7),r.Rb(),r.Sb(9,"div",8),r.yc(10,L,2,3,"button",9),r.Rb(),r.yc(11,T,2,0,"button",10),r.Rb(),r.Rb()),2&t){const t=r.ec();r.Bb(2),r.Bc(t.wordsPassed),r.Bb(3),r.Bc(null==t.currentWord?null:t.currentWord.russian.join(",")),r.Bb(1),r.kc("ngIf",t.isAnswered),r.Bb(2),r.kc("ngForOf",t.englishWord),r.Bb(2),r.kc("ngForOf",t.characters),r.Bb(1),r.kc("ngIf",t.isAnswered)}}let F=(()=>{class t{constructor(t,e,n){this.learnService=t,this.utilsService=e,this.router=n}onkeyup(t){if("Enter"===t.key)return void this.onNext();const e=(" "===t.key?"_":t.key).toUpperCase();this.characters.findIndex(t=>t.value===e)<0||this.chooseCharacter(e)}ngOnInit(){this.initializeState(),this.learnService.getWordsToLearn(null,4),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.getNextWord()})}chooseCharacter(t){if(this.isItNextLetter(t)){this.englishWord[this.currentWord.english.length-this.characters.length]=t;const e=this.characters.findIndex(e=>e.value===t);this.characters.splice(e,1)}else{if(1===this.mistakes)return this.addResult(!1),void this.getNextWord();this.mistakes++;const e=this.characters.findIndex(e=>e.value===t);this.characters[e].highlight=!0,setTimeout(()=>this.characters[e].highlight=!1,500)}0===this.characters.length&&(this.onPronounce(),this.isAnswered=!0)}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(null,4)}onPronounce(){this.utilsService.onPronounce(this.currentWord.sound_url)}onNext(){this.isAnswered&&(this.addResult(!0),this.getNextWord(),this.isAnswered=!1)}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,4,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Word constructor",result:this.results}})}getNextWord(){this.mistakes=0,this.currentWord=this.words[this.results.length],this.currentWord?(this.wordsPassed=this.results.length+1+" / "+this.words.length,this.englishWord=Array(this.currentWord.english.length),this.characters=this.calculateCharacters(this.currentWord.english)):this.finishGame()}calculateCharacters(t){let e=[];for(const n of t)e.push({value:n.trim().toUpperCase()||"_",highlight:!1});return e=this.utilsService.shuffleArray(e),e}isItNextLetter(t){return"_"===t&&(t=" "),this.currentWord.english[this.currentWord.english.length-this.characters.length].toUpperCase()===t}initializeState(){this.results=[],this.words=[],this.currentWord=null,this.englishWord=[],this.characters=[],this.mistakes=0,this.isAnswered=!1}addResult(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}ngOnDestroy(){this.subscriptionWords.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(C.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-word-constructor"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.rc)},decls:2,vars:1,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"game__word"],["class","transcription",4,"ngIf"],[1,"characters-holder"],[4,"ngFor","ngForOf"],[1,"characters"],["mat-stroked-button","","color","primary",3,"animation","click",4,"ngFor","ngForOf"],["mat-raised-button","",3,"click",4,"ngIf"],[1,"transcription"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.yc(1,j,12,6,"div",0),r.Rb()),2&t&&(r.Bb(1),r.kc("ngIf",e.currentWord))},directives:[y.a,c.l,u.a,c.k,k.b],styles:[".transcription[_ngcontent-%COMP%]{color:grey}.main-content[_ngcontent-%COMP%]{width:600px;height:300px;margin:0 auto}.game[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center}.wordsCount[_ngcontent-%COMP%]{text-align:end}.characters-holder[_ngcontent-%COMP%]{margin:15px 0}.characters-holder[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{display:flex;justify-content:center}span[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid #000;border-radius:2px;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}span[_ngcontent-%COMP%]:nth-child(n+2){margin-left:2px}@-webkit-keyframes incorrect{0%{background:initial}50%{background:red}to{background:initial}}@keyframes incorrect{0%{background:initial}50%{background:red}to{background:initial}}"]}),t})();var $=n("qFsG"),G=n("3Pt+");const z=["input"];function U(t,e){if(1&t){const t=r.Tb();r.Sb(0,"mat-form-field",8),r.Sb(1,"mat-label"),r.Ac(2,"Type word here"),r.Rb(),r.Sb(3,"input",9,10),r.ac("ngModelChange",(function(e){return r.sc(t),r.ec().inputValue=e})),r.Rb(),r.Rb()}if(2&t){const t=r.ec();r.Bb(3),r.kc("ngModel",t.inputValue)}}function H(t,e){if(1&t&&(r.Sb(0,"p",15),r.Ac(1),r.Rb()),2&t){const t=r.ec(2);r.Bb(1),r.Cc(" ",t.inputValue," ")}}function q(t,e){if(1&t&&(r.Sb(0,"div",11),r.Sb(1,"p",12),r.Ac(2),r.Rb(),r.yc(3,H,2,1,"p",13),r.Sb(4,"p",14),r.Ac(5),r.Rb(),r.Sb(6,"p"),r.Ac(7),r.Rb(),r.Sb(8,"p"),r.Ac(9),r.Rb(),r.Rb()),2&t){const t=r.ec();r.Bb(2),r.Bc(t.currentWord.english),r.Bb(1),r.kc("ngIf",t.inputValue.toUpperCase()!==t.currentWord.english.toUpperCase()),r.Bb(2),r.Cc("[",t.currentWord.transcription,"]"),r.Bb(2),r.Bc(t.currentWord.russian.join(",")),r.Bb(2),r.Bc(t.currentWord.text)}}let E=(()=>{class t{constructor(t,e,n){this.learnService=t,this.utilsService=e,this.router=n}set input(t){t&&(this.inputPlaceholder=t.nativeElement)}onkeyup(t){"Enter"===t.key&&this.onEnterClick()}ngOnInit(){this.initializeState(),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.getNextWord()}),this.learnService.getWordsToLearn(!1,5)}onEnterAnswer(){this.isAnswered=!0;const t={wordId:this.currentWord.id,isCorrect:this.inputValue.toUpperCase()===this.currentWord.english.toUpperCase()};this.results.push(t)}onEnterClick(){if(this.isAnswered)return this.getNextWord(),void(this.isAnswered=!1);this.onEnterAnswer()}onPronounce(){this.utilsService.onPronounce(this.currentWord.sound_url)}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(!1,5)}getNextWord(){this.currentWord=this.words[this.results.length],this.currentWord?(this.wordsPassed=this.results.length+1+" / "+this.words.length,this.inputValue="",this.onPronounce(),setTimeout(()=>this.inputPlaceholder.focus(),0)):this.finishGame()}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,5,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Listening",result:this.results}})}initializeState(){this.words=[],this.currentWord=null,this.results=[],this.inputValue="",this.isAnswered=!1}ngOnDestroy(){this.subscriptionWords.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(C.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-listening"]],viewQuery:function(t,e){var n;1&t&&r.Fc(z,!0),2&t&&r.oc(n=r.bc())&&(e.input=n.first)},hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.rc)},decls:13,vars:3,consts:[[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"btn--pronounce"],["mat-fab","","color","primary",3,"click"],["class","input",4,"ngIf"],["class","show",4,"ngIf"],["mat-raised-button","",3,"click"],[1,"input"],["matInput","",3,"ngModel","ngModelChange"],["input",""],[1,"show"],[1,"show__wordCorrect"],["class","show__wordIncorrect",4,"ngIf"],[1,"show__transcription"],[1,"show__wordIncorrect"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.Sb(1,"div",0),r.Sb(2,"p",1),r.Ac(3),r.Rb(),r.Sb(4,"mat-card",2),r.Sb(5,"h2",3),r.Sb(6,"button",4),r.ac("click",(function(){return e.onPronounce()})),r.Sb(7,"mat-icon"),r.Ac(8,"volume_up"),r.Rb(),r.Rb(),r.Rb(),r.yc(9,U,5,1,"mat-form-field",5),r.yc(10,q,10,5,"div",6),r.Sb(11,"button",7),r.ac("click",(function(){return e.onEnterClick()})),r.Ac(12,"Enter"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(3),r.Bc(e.wordsPassed),r.Bb(6),r.kc("ngIf",!e.isAnswered),r.Bb(1),r.kc("ngIf",e.isAnswered))},directives:[y.a,u.a,k.b,P.a,c.l,o.c,o.f,$.a,G.b,G.l,G.o],styles:[".main-content[_ngcontent-%COMP%]{width:500px}.wordsCount[_ngcontent-%COMP%]{text-align:right}.btn--pronounce[_ngcontent-%COMP%]{text-align:center}.input[_ngcontent-%COMP%]{margin:50px 0;width:100%}.game[_ngcontent-%COMP%]{width:100%;height:100%}.show[_ngcontent-%COMP%]{text-align:center}.show__wordCorrect[_ngcontent-%COMP%]{font-size:18px;color:green}.show__wordIncorrect[_ngcontent-%COMP%]{color:red}.show__transcription[_ngcontent-%COMP%]{color:grey}"]}),t})();function V(t,e){if(1&t&&(r.Sb(0,"p",7),r.Ac(1),r.Rb()),2&t){const t=r.ec().$implicit;r.Bb(1),r.Cc(" ",t.russian.join(",")," ")}}function D(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",8),r.ac("click",(function(){r.sc(t);const e=r.ec().$implicit;return r.ec().addResult(e,!0)})),r.Ac(1," I know "),r.Rb()}}function Q(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",9),r.ac("click",(function(){r.sc(t);const e=r.ec().$implicit;return r.ec().addResult(e,!1)})),r.Ac(1," I don't know "),r.Rb()}}function J(t,e){if(1&t){const t=r.Tb();r.Sb(0,"mat-card"),r.Sb(1,"h2"),r.Ac(2),r.Rb(),r.yc(3,V,2,1,"p",2),r.Sb(4,"button",3),r.ac("click",(function(){r.sc(t);const n=e.$implicit;return r.ec().onPronounce(n.sound_url)})),r.Sb(5,"mat-icon"),r.Ac(6,"volume_up"),r.Rb(),r.Rb(),r.Sb(7,"p",4),r.Ac(8),r.Rb(),r.Sb(9,"mat-card-actions"),r.yc(10,D,2,0,"button",5),r.yc(11,Q,2,0,"button",6),r.Rb(),r.Rb()}if(2&t){const t=e.$implicit,n=r.ec();r.xc("border",n.checkedWords[t.id]),r.Bb(2),r.Bc(t.english),r.Bb(1),r.kc("ngIf",n.checkedWords[t.id]),r.Bb(5),r.Cc("[",t.transcription,"]"),r.Bb(2),r.kc("ngIf",!n.checkedWords[t.id]),r.Bb(1),r.kc("ngIf",!n.checkedWords[t.id])}}let K=(()=>{class t{constructor(t,e,n){this.learnService=t,this.utilsService=e,this.router=n,this.checkedWords={}}ngOnInit(){this.initializeState(),this.words$=this.learnService.wordsUpdateListener$.pipe(Object(w.a)(t=>this.wordsLength=t.length)),this.learnService.getWordsToLearn(!1,6)}onPronounce(t){this.utilsService.onPronounce(t)}addResult(t,e){const n={wordId:t.id,isCorrect:e};this.checkedWords[t.id]=e?"1px solid green":"1px solid red",this.onPronounce(t.sound_url),this.results.push(n),this.results.length===this.wordsLength&&this.finishGame()}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(!1,6)}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,6,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Word cards",result:this.results}})}initializeState(){this.results=[],this.wordsLength=0,this.checkedWords={}}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(C.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-word-cards"]],decls:3,vars:3,consts:[[1,"main-content"],[3,"border",4,"ngFor","ngForOf"],["class","translation",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"transcription"],["mat-raised-button","","class","btn","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","class","btn idk",3,"click",4,"ngIf"],[1,"translation"],["mat-raised-button","","color","primary",1,"btn",3,"click"],["mat-raised-button","",1,"btn","idk",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.yc(1,J,12,7,"mat-card",1),r.fc(2,"async"),r.Rb()),2&t&&(r.Bb(1),r.kc("ngForOf",r.gc(2,1,e.words$)))},directives:[c.k,u.a,c.l,k.b,P.a,u.b],pipes:[c.b],styles:[".main-content[_ngcontent-%COMP%]{width:80%;margin:0 auto;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:20px}mat-card[_ngcontent-%COMP%]{width:200px;display:flex;flex-direction:column;align-items:center}.transcription[_ngcontent-%COMP%]{color:grey}.btn[_ngcontent-%COMP%]{display:block;margin:0!important}.btn[_ngcontent-%COMP%], mat-card-actions[_ngcontent-%COMP%]{width:100%}.idk[_ngcontent-%COMP%]{margin-top:10px}"]}),t})();var X=n("cp0P"),Y=n("LRne"),Z=n("eIep"),tt=n("SxV6"),et=n("Ii1A");let nt=(()=>{class t{constructor(t,e){this.learnService=t,this.setService=e}resolve(){return this.learnService.getQuantities().pipe(Object(Z.a)(t=>(this.setService.getSets(),Object(X.a)({quantities:Object(Y.a)(t),sets:this.setService.setsUpdateListener$.pipe(Object(tt.a)())}))))}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s.a),r.Wb(et.a))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var it=n("Qu3c");function rt(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",7),r.ac("click",(function(){return r.sc(t),r.ec().onClick()})),r.Ac(1," Learn more "),r.Rb()}}let st=(()=>{class t{constructor(t,e){this.location=t,this.router=e}onkeyup(t){"Enter"===t.key&&(12===this.results.length?this.onClick():this.router.navigate(["/learn"]))}ngOnInit(){this.results=window.history.state.result,[this.correct,this.incorrect]=this.calculateCorrectAndIncorrect(this.results)}onClick(){this.location.back()}calculateCorrectAndIncorrect(t){let e=0,n=0;for(const i of this.results)i.isCorrect?e++:n++;return[e,n]}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(c.h),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-results"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.rc)},decls:11,vars:8,consts:[[1,"result"],[1,"visual"],[1,"correct",3,"matTooltip"],[1,"incorrect",3,"matTooltip"],[1,"buttons"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","routerLink","/learn"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.Sb(1,"mat-card",0),r.Sb(2,"h2"),r.Ac(3),r.Rb(),r.Sb(4,"div",1),r.Ob(5,"div",2),r.Ob(6,"div",3),r.Rb(),r.Sb(7,"div",4),r.yc(8,rt,2,0,"button",5),r.Sb(9,"button",6),r.Ac(10,"Go to training"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(3),r.Cc("",e.results.length," words"),r.Bb(2),r.xc("width",e.correct/e.results.length*100+"%"),r.kc("matTooltip",e.correct+" correct words"),r.Bb(1),r.xc("width",e.incorrect/e.results.length*100+"%"),r.kc("matTooltip",e.incorrect+" incorrect words"),r.Bb(2),r.kc("ngIf",e.incorrect>0))},directives:[y.a,u.a,it.a,c.l,k.b,i.d],styles:[".result[_ngcontent-%COMP%]{width:200px;text-align:center}.correct[_ngcontent-%COMP%]{background:#1aff1a;height:20px}.incorrect[_ngcontent-%COMP%]{margin-top:20px;background:#f99;height:20px}.buttons[_ngcontent-%COMP%]{margin-top:50px}"]}),t})(),ot=(()=>{class t{constructor(t){this.router=t}canActivate(){const t=this.router.getCurrentNavigation().extras;if(t.state&&t.state.gameName&&t.state.result)return!0;this.router.navigate(["/learn"])}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(i.c))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ct(t,e){if(1&t&&(r.Sb(0,"div",4),r.Sb(1,"div",5),r.Ob(2,"img",6),r.Rb(),r.Sb(3,"p",7),r.Ac(4),r.Rb(),r.Sb(5,"p",8),r.Ac(6),r.Rb(),r.Sb(7,"p",9),r.Ac(8),r.Rb(),r.Rb()),2&t){const t=r.ec();r.Bb(2),r.lc("src",t.currentWord.pic_url,r.tc),r.Bb(2),r.Bc(t.currentWord.english),r.Bb(2),r.Bc(t.currentWord.russian.join(",")),r.Bb(2),r.Cc("[",t.currentWord.transcription,"]")}}const at=[{path:"",component:m,resolve:{data:nt}},{path:"word-translation",component:B,canActivate:[v],data:{gameName:"word-translation"}},{path:"translation-word",component:B,canActivate:[v],data:{gameName:"translation-word"}},{path:"savannah",component:_,canActivate:[v]},{path:"word_constructor",component:F,canActivate:[v]},{path:"listening",component:E,canActivate:[v]},{path:"word_cards",component:K,canActivate:[v]},{path:"brainstorm",component:(()=>{class t{constructor(t,e,n){this.learnService=t,this.utilsService=e,this.router=n,this.results=[]}ngOnInit(){this.wordsSub=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.getNextWord()}),this.learnService.getWordsToLearn(!1,7)}onPronounce(){this.utilsService.onPronounce(this.currentWord.sound_url)}ngOnDestroy(){this.wordsSub.unsubscribe()}onAnswer(t){if(this.results.push({isCorrect:t,wordId:this.currentWord.id}),this.results.length===this.words.length)return this.finishGame();this.getNextWord()}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,0,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Brainstorm",result:this.results}})}getNextWord(){this.currentWord=this.words[this.results.length],this.onPronounce()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(C.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-brainstorm"]],decls:12,vars:1,consts:[["mat-icon-button","",3,"click"],["class","word-info",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"word-info"],[1,"pic-holder"],["alt","",3,"src"],[1,"word-english"],[1,"word-russian"],[1,"word-transcription"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.Sb(1,"mat-card"),r.Sb(2,"mat-card-content"),r.Sb(3,"button",0),r.ac("click",(function(){return e.onPronounce()})),r.Sb(4,"mat-icon"),r.Ac(5,"volume_up"),r.Rb(),r.Rb(),r.yc(6,ct,9,4,"div",1),r.Rb(),r.Sb(7,"mat-card-actions"),r.Sb(8,"button",2),r.ac("click",(function(){return e.onAnswer(!1)})),r.Ac(9," I don't know "),r.Rb(),r.Sb(10,"button",3),r.ac("click",(function(){return e.onAnswer(!0)})),r.Ac(11," I know "),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(6),r.kc("ngIf",e.currentWord))},directives:[y.a,u.a,u.c,k.b,P.a,c.l,u.b],styles:["mat-card[_ngcontent-%COMP%]{width:400px;min-height:400px;flex-direction:column}mat-card[_ngcontent-%COMP%], mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.word-info[_ngcontent-%COMP%]{text-align:center}.word-english[_ngcontent-%COMP%]{font-size:18px}.word-russian[_ngcontent-%COMP%]{color:green}.word-transcription[_ngcontent-%COMP%]{color:grey;font-size:14px}img[_ngcontent-%COMP%]{max-width:100%}.pic-holder[_ngcontent-%COMP%]{width:200px;height:200px;margin:0 auto}"]}),t})(),canActivate:[v]},{path:"result",component:st,canActivate:[ot]}];let lt=(()=>{class t{}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(at)],i.g]}),t})();var ut=n("PCNd");let ht=(()=>{class t{}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(e){return new(e||t)},providers:[nt],imports:[[lt,ut.a]]}),t})()}}]);