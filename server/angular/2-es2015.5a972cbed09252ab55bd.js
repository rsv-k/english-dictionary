(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{qnIH:function(t,e,n){"use strict";n.r(e),n.d(e,"DictionaryModule",(function(){return Nt}));var i=n("tyNb"),o=n("lJxs"),s=n("fXoL"),c=n("tk/3"),r=n("vkgz"),l=n("Kj3r"),a=n("/uUt"),d=n("eIep"),u=n("2Vo4"),h=n("XNiG"),p=n("cp0P"),b=n("LRne"),f=n("OiFK");const g="https://contentcdn.lingualeo.com/uploads/upimages/0bbdd3793cb97ec4189557013fc4d6e4bed4f714.png";let w=(()=>{class t{constructor(t,e){this.http=t,this.utilsService=e,this.wordsCountUpdateListener=new u.a(0),this.wordsCount=0,this.wordsCount$=this.wordsCountUpdateListener.asObservable(),this.wordsUpdateListener=new h.a,this.wordsUpdateListener$=this.wordsUpdateListener.asObservable(),this.words=[]}getWords(t){const e={params:new c.d};for(const n in t)t[n]&&(e.params=e.params.set(n,t[n]));this.http.get("/api/word",e).pipe(Object(r.a)(t=>{this.updateWordsCount(t.wordsCount)}),Object(o.a)(this.utilsService.changeIdField),Object(o.a)(this.utilsService.setDefaultPic)).subscribe(e=>{t.startsWith?this.wordsUpdateListener.next([...e]):((t.isCachingWords||0===this.words.length)&&(this.words=[...this.words,...e]),this.updateWords("GET",this.words))})}emptyWords(){this.words=[]}editWord(t){t.pic_url===g&&(t.pic_url=null),this.http.put("/api/word",{word:t}).pipe(Object(o.a)(this.utilsService.changeIdField),Object(o.a)(this.utilsService.setDefaultPic),Object(r.a)(t=>this.updateWords("EDIT",t))).subscribe()}createWord(t){return t.pic_url===g&&(t.pic_url=null),this.http.post("/api/word",{word:t}).pipe(Object(o.a)(this.utilsService.changeIdField),Object(o.a)(this.utilsService.setDefaultPic),Object(r.a)(t=>{this.updateWordsCount(this.wordsCount+1),this.updateWords("ADD",t)})).subscribe(()=>{this.wordsCount+=1})}deleteWord(t,e){let n="";e&&(n="?setId="+e),this.http.delete("/api/word/"+t+n).pipe(Object(o.a)(this.utilsService.changeIdField),Object(r.a)(t=>{this.updateWordsCount(this.wordsCount-1),this.updateWords("DELETE",t)})).subscribe(()=>{})}deleteManyWords(t,e,n){this.http.post("/api/word/deleteMany",{setId:t,ids:e,reverse:n}).subscribe(()=>{this.wordsCount-=e.length;const t={};e.forEach(e=>{t[e]=!0}),this.words=this.words.filter(e=>n?t[e.id]:!t[e.id]),this.updateWordsCount(this.wordsCount-e.length),this.wordsUpdateListener.next([...this.words]),this.utilsService.showSnackBar("Words deleted")})}showTranslations(t){return t.pipe(Object(l.a)(1e3),Object(a.a)(),Object(d.a)(t=>Object(p.a)({translations:0===t.trim().length?Object(b.a)([]):this.getTranslations(t),word:this.getSpecificWord(t)})))}getSpecificWord(t){return this.http.get("/api/word/"+t).pipe(Object(o.a)(t=>(null===t.result[0]&&(t.result=[]),t)),Object(o.a)(this.utilsService.changeIdField))}getTranslations(t){return this.http.get("/api/word/translations/"+t).pipe(Object(o.a)(t=>t.result.translate.map(e=>({pic_url:e.pic_url||null,value:e.value,sound_url:t.result.sound_url,transcription:t.result.transcription}))))}updateWords(t,e){switch(t){case"ADD":this.words=[e[0],...this.words];break;case"GET":this.words=e;break;case"DELETE":this.words=this.words.filter(t=>t.id!==e[0].id);break;case"EDIT":if(this.words=this.words.map(t=>t.id===e[0].id?e[0]:t),this.words.findIndex(t=>t.id===e[0].id)<0){const t=this.words.findIndex(t=>{const n=new Date(t.createdAt).getTime();return new Date(e[0].createdAt).getTime()-n>0});t>=0?this.words.splice(t,0,e[0]):this.words.length<20&&this.words.push(e[0])}}if("GET"!==t){let e=t.toLowerCase();e+="e"===e[e.length-1]?"d":"ed",this.utilsService.showSnackBar("Word "+e)}this.wordsUpdateListener.next([...this.words])}updateWordsCount(t){this.wordsCount=t,this.wordsCountUpdateListener.next(this.wordsCount)}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(c.b),s.Wb(f.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n("xgIS"),S=n("5+tZ"),k=n("pLZG"),y=n("7o/Q"),_=n("D0XW");class v{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new I(t,this.period,this.scheduler))}}class I extends y.a{constructor(t,e,n){super(t),this.period=e,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(T,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function T(t){let{subscriber:e,period:n}=t;e.notifyNext(),this.schedule(t,n)}function O(t,e,n,i){const o=window&&!!window.document&&window.document.documentElement;let s=o&&e?window:n;if(t&&(s=t&&o&&"string"==typeof t?function(t,e,n){return(n?window.document:e).querySelector(t)}(t,n.nativeElement,i):t,!s))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return s}function C(t){return t&&!t.firstChange}const W={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},A={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class R{constructor(t=!0){this.vertical=t,this.propsMap=t?W:A}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function x(t){return["Window","global"].some(e=>Object.prototype.toString.call(t).includes(e))}function P(t,e){return t?e.document.documentElement:null}function M(t,e){const n=function({container:t,isWindow:e,axis:n}){const{offsetHeightKey:i,clientHeightKey:o}=j(n);return D(t,e,i,o)}(e);return e.isWindow?function(t,e,n){const{axis:i,container:o,isWindow:s}=n,{offsetHeightKey:c,clientHeightKey:r}=j(i),l=t+B(P(s,o),i,s),a=D(e.nativeElement,s,c,r);return{height:t,scrolled:l,totalToScroll:function(t,e,n){const i=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[i]+B(t,e,n)}(e.nativeElement,i,s)+a,isWindow:s}}(n,t,e):function(t,e,n){const{axis:i,container:o}=n;return{height:t,scrolled:o[i.scrollTopKey()],totalToScroll:o[i.scrollHeightKey()],isWindow:!1}}(n,0,e)}function j(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function D(t,e,n,i){if(isNaN(t[n])){const n=P(e,t);return n?n[i]:0}return t[n]}function B(t,e,n){const i=e.pageYOffsetKey(),o=e.scrollTopKey(),s=e.offsetTopKey();return isNaN(window.pageYOffset)?P(n,t)[o]:t.ownerDocument?t.ownerDocument.defaultView[i]:t[s]}function E(t,e,n){let i,o;if(t.totalToScroll<=0)return!1;const s=t.isWindow?t.scrolled:t.height+t.scrolled;return n?(i=(t.totalToScroll-s)/t.totalToScroll,o=e.down/10):(i=t.scrolled/(t.scrolled+(t.totalToScroll-s)),o=e.up/10),i<=o}class N{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}updateTriggeredFlag(t,e){e?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,e){return e?this.triggered.down===t:this.triggered.up===t}}function H(t){const{scrollDown:e,stats:{scrolled:n}}=t;return{type:e?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:n}}}let L=(()=>{class t{constructor(t,e){this.element=t,this.zone=e,this.scrolled=new s.n,this.scrolledUp=new s.n,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:e,infiniteScrollDistance:n}){const i=C(t),o=C(e),s=C(n),c=!o&&!this.infiniteScrollDisabled||o&&!e.currentValue||s;(i||o||s)&&(this.destroyScroller(),c&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:e,scrollWindow:n,element:i,fromRoot:s}=t,c=function({windowElement:t,axis:e}){return function(t,e){const n=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return Object.assign(Object.assign({},t),{container:n})}({axis:e,isWindow:x(t)},t)}({axis:new R(!t.horizontal),windowElement:O(e,n,i,s)}),l=new N({totalToScroll:M(i,c)}),a={up:t.upDistance,down:t.downDistance};return function(t){let e=Object(m.a)(t.container,"scroll");return t.throttle&&(e=e.pipe(function(t,e=_.a){return n=>n.lift(new v(t,e))}(t.throttle))),e}({container:c.container,throttle:t.throttle}).pipe(Object(S.a)(()=>Object(b.a)(M(i,c))),Object(o.a)(t=>function(t,e,n){const{scrollDown:i,fire:o}=function(t,e,n){const i=function(t,e){return t<e.scrolled}(t,e);return{fire:E(e,n,i),scrollDown:i}}(t,e,n);return{scrollDown:i,fire:o,stats:e}}(l.lastScrollPosition,t,a)),Object(r.a)(({stats:t})=>l.updateScroll(t.scrolled,t.totalToScroll)),Object(k.a)(({fire:e,scrollDown:n,stats:{totalToScroll:i}})=>function(t,e,n){return!(!t||!e)||!(n||!e)}(t.alwaysCallback,e,l.isTriggeredScroll(i,n))),Object(r.a)(({scrollDown:t,stats:{totalToScroll:e}})=>{l.updateTriggeredFlag(e,t)}),Object(o.a)(H))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:e}){switch(t){case"[NGX_ISE] DOWN":return this.scrolled.emit(e);case"[NGX_ISE] UP":return this.scrolledUp.emit(e);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(s.l),s.Nb(s.z))},t.\u0275dir=s.Ib({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[s.zb]}),t})(),K=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[]]}),t})();var $=n("7dP1"),F=n("kmnG"),U=n("qFsG"),V=n("/1cH"),G=n("ofXK"),z=n("bTqV"),Y=n("NFeN"),X=n("FKr1"),J=n("Qu3c");const Q=["myTranslation"];function q(t,e){if(1&t){const t=s.Tb();s.Sb(0,"button",9),s.ac("click",(function(){s.sc(t);const e=s.ec(),n=s.pc(5);return e.clearInput(),n.value=""})),s.Sb(1,"mat-icon"),s.Ac(2,"clear"),s.Rb(),s.Rb()}}function Z(t,e){if(1&t&&(s.Sb(0,"mat-option",11),s.Ac(1),s.Rb()),2&t){const t=e.$implicit;s.kc("matTooltip",t.value.length>50?t.value:null)("disabled",t.isPresent)("value",t),s.Bb(1),s.Cc(" ",t.value," ")}}function tt(t,e){1&t&&(s.Sb(0,"mat-option"),s.Ac(1,"my translation"),s.Rb())}function et(t,e){if(1&t&&(s.Qb(0),s.yc(1,Z,2,4,"mat-option",10),s.fc(2,"async"),s.yc(3,tt,2,0,"mat-option",7),s.fc(4,"async"),s.Pb()),2&t){const t=s.ec();var n;const e=null==(n=s.gc(4,4,t.translations$))?null:n.length;s.Bb(1),s.kc("ngForOf",s.gc(2,2,t.translations$)),s.Bb(2),s.kc("ngIf",e)}}function nt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"button",16),s.ac("click",(function(){s.sc(t),s.ec();const e=s.pc(5);return s.ec().onMyTranslationAdd(e.value)})),s.Ac(1," add "),s.Rb()}}function it(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",12),s.Sb(1,"mat-form-field"),s.Sb(2,"mat-label"),s.Ac(3,"my translation"),s.Rb(),s.Sb(4,"input",13,14),s.ac("blur",(function(){s.sc(t);const e=s.ec(),n=s.pc(5);return e.onBlur(),n.value=""})),s.Rb(),s.Rb(),s.yc(6,nt,2,0,"button",15),s.Rb()}if(2&t){const t=s.pc(5);s.Bb(6),s.kc("ngIf",t.value.length>0)}}let ot=(()=>{class t{constructor(t,e){this.wordService=t,this.authService=e,this.inputValue="",this.wordText$=new h.a,this.isMyTranslation=!1}set customTranslation(t){t&&setTimeout(()=>t.nativeElement.focus(),0)}ngOnInit(){this.translations$=this.wordService.showTranslations(this.wordText$).pipe(Object(r.a)(t=>{this.word=t.word[0],this.translation=t.translations[0],this.wordService.getWords({setId:this.setId,startsWith:this.inputValue})}),Object(o.a)(t=>{const e={};if(this.word)for(const n of this.word.russian)e[n]=!0;return t.translations.map(t=>(t.isPresent=e[t.value],t))}))}onInput(t){if(this.inputValue=t.trim(),!t)return this.wordService.getWords({setId:this.setId});this.inputValue&&this.wordText$.next(this.inputValue)}chooseTranslation(t){t?(this.word?(this.setId&&!this.word.setId.includes(this.setId)&&this.word.setId.push(this.setId),this.word.russian.push(t.value),this.wordService.editWord(this.word)):this.wordService.createWord({english:this.inputValue,russian:[t.value],pic_url:t.pic_url,setId:this.setId?[this.setId]:[],sound_url:t.sound_url,transcription:t.transcription,learn:{wordTranslation:!0,translationWord:!0,savannah:!0,wordConstructor:!0,listening:!0,wordCards:!0,brainstorm:!0},ownerId:this.authService.userId}),this.clearInput()):this.isMyTranslation=!0}onMyTranslationAdd(t){this.translation.value=t,this.translation.pic_url=null,this.chooseTranslation(this.translation)}onBlur(){setTimeout(()=>this.isMyTranslation=!1,500)}clearInput(){this.inputValue="",this.wordText$.next(""),this.translation=null,this.word=null,this.wordService.getWords({setId:this.setId})}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(w),s.Nb($.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-word-create"]],viewQuery:function(t,e){var n;1&t&&s.Fc(Q,!0),2&t&&s.oc(n=s.bc())&&(e.customTranslation=n.first)},inputs:{setId:"setId"},decls:11,vars:4,consts:[[1,"create__group"],[1,"creation"],["matInput","",3,"matAutocomplete","input"],["wordInput",""],["class","clear--button","mat-icon-button","",3,"click",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[4,"ngIf"],["class","custom",4,"ngIf"],["mat-icon-button","",1,"clear--button",3,"click"],["class","create__option",3,"matTooltip","disabled","value",4,"ngFor","ngForOf"],[1,"create__option",3,"matTooltip","disabled","value"],[1,"custom"],["matInput","",3,"blur"],["myTranslation",""],["class","custom__button","mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","",1,"custom__button",3,"click"]],template:function(t,e){if(1&t){const t=s.Tb();s.Sb(0,"mat-form-field",0),s.Sb(1,"mat-label"),s.Ac(2,"Word"),s.Rb(),s.Sb(3,"div",1),s.Sb(4,"input",2,3),s.ac("input",(function(){s.sc(t);const n=s.pc(5);return e.onInput(n.value)})),s.Rb(),s.yc(6,q,3,0,"button",4),s.Rb(),s.Sb(7,"mat-autocomplete",5,6),s.ac("optionSelected",(function(n){s.sc(t);const i=s.pc(5);return e.chooseTranslation(n.option.value),i.value=e.inputValue})),s.yc(9,et,5,6,"ng-container",7),s.Rb(),s.Rb(),s.yc(10,it,7,1,"div",8)}if(2&t){const t=s.pc(5),n=s.pc(8);s.Bb(4),s.kc("matAutocomplete",n),s.Bb(2),s.kc("ngIf",t.value.length>1),s.Bb(3),s.kc("ngIf",t.value.length>0),s.Bb(1),s.kc("ngIf",e.isMyTranslation)}},directives:[F.c,F.f,U.a,V.c,G.l,V.a,z.b,Y.a,G.k,X.f,J.a],pipes:[G.b],styles:[".create__group[_ngcontent-%COMP%]{width:100%}.creation[_ngcontent-%COMP%]{position:relative}.clear--button[_ngcontent-%COMP%]{position:absolute;right:0;top:-8px;z-index:9999}.custom[_ngcontent-%COMP%]{display:flex}.custom__button[_ngcontent-%COMP%]{align-self:center}"]}),t})();var st=n("Wp6s"),ct=n("GOW1"),rt=n("Ii1A"),lt=n("bSwM"),at=n("d3UM");function dt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"mat-option",5),s.ac("click",(function(){s.sc(t);const n=e.index;return s.ec().manageSelected(n)})),s.Ac(1),s.Rb()}if(2&t){const t=e.$implicit;s.Bb(1),s.Cc(" ",t," ")}}function ut(t,e){if(1&t){const t=s.Tb();s.Sb(0,"mat-option",5),s.ac("click",(function(){s.sc(t);const n=e.$implicit;return s.ec().addToSet(n.id)})),s.Ac(1),s.Rb()}if(2&t){const t=e.$implicit;s.Bb(1),s.Cc(" ",t.title," ")}}let ht=(()=>{class t{constructor(t,e,n){this.learnService=t,this.wordService=e,this.setService=n,this.setCheckAll=new s.n,this.uncheckWords=new s.n}ngOnInit(){this.availableGames=["All",...this.learnService.getAvailableGames()],this.sets$=this.setService.setsUpdateListener$,this.setService.getSets()}manageSelected(t){(this.checkAll||this.checkedWords.length)&&(isNaN(t)?this.deleteSelected():this.sendToLearn(t),this.uncheckWords.emit())}addToSet(t){if(!this.checkAll&&!this.checkedWords.length)return;const e=this.getOnlyIds();this.setService.addWordsToSet(t,e,this.checkAll),this.uncheckWords.emit()}setAsLearned(){if(!this.checkAll&&!this.checkedWords.length)return;const t=this.getOnlyIds();this.learnService.toggleLearnings(t,this.checkAll,0,!1),this.uncheckWords.emit()}deleteSelected(){const t=this.getOnlyIds();this.wordService.deleteManyWords(this.setId,t,this.checkAll)}sendToLearn(t){const e=this.getOnlyIds();this.learnService.toggleLearnings(e,this.checkAll,t,!0)}getOnlyIds(){return this.checkedWords.map(t=>t.id)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(ct.a),s.Nb(w),s.Nb(rt.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-manage-words"]],inputs:{setId:"setId",checkAll:"checkAll",checkedWords:"checkedWords"},outputs:{setCheckAll:"setCheckAll",uncheckWords:"uncheckWords"},decls:18,vars:7,consts:[["matTooltip","select all","color","primary",1,"dictionary__selectAll",3,"checked","change"],["matTooltip","set as learned selected","mat-icon-button","","color","primary",3,"disabled","click"],["matTooltip","delete selected","mat-icon-button","","color","warn",3,"disabled","click"],[1,"manage-words__sendToGames"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){1&t&&(s.Sb(0,"mat-checkbox",0),s.ac("change",(function(){return e.setCheckAll.emit(!e.checkAll)})),s.Rb(),s.Sb(1,"button",1),s.ac("click",(function(){return e.setAsLearned()})),s.Sb(2,"mat-icon"),s.Ac(3,"done"),s.Rb(),s.Rb(),s.Sb(4,"button",2),s.ac("click",(function(){return e.manageSelected()})),s.Sb(5,"mat-icon"),s.Ac(6,"delete"),s.Rb(),s.Rb(),s.Sb(7,"mat-form-field",3),s.Sb(8,"mat-label"),s.Ac(9,"Send to..."),s.Rb(),s.Sb(10,"mat-select"),s.yc(11,dt,2,1,"mat-option",4),s.Rb(),s.Rb(),s.Sb(12,"mat-form-field"),s.Sb(13,"mat-label"),s.Ac(14,"Add to set"),s.Rb(),s.Sb(15,"mat-select"),s.yc(16,ut,2,1,"mat-option",4),s.fc(17,"async"),s.Rb(),s.Rb()),2&t&&(s.kc("checked",e.checkAll),s.Bb(1),s.kc("disabled",!e.checkAll&&!e.checkedWords.length),s.Bb(3),s.kc("disabled",!e.checkAll&&!e.checkedWords.length),s.Bb(7),s.kc("ngForOf",e.availableGames),s.Bb(5),s.kc("ngForOf",s.gc(17,5,e.sets$)))},directives:[lt.a,J.a,z.b,Y.a,F.c,F.f,at.a,G.k,X.f],pipes:[G.b],styles:["[_nghost-%COMP%]{text-align:left;padding:0 16px;margin-bottom:20px}.manage-words__sendToGames[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();var pt=n("7EHt");let bt=(()=>{class t{transform(t,e){return t.length>e?t.slice(0,e)+"...":t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Mb({name:"cutLength",type:t,pure:!0}),t})();function ft(t,e){if(1&t&&(s.Sb(0,"mat-panel-description"),s.Ac(1),s.fc(2,"cutLength"),s.Rb()),2&t){const t=s.ec();s.Bb(1),s.Cc(" ",s.hc(2,1,t.word.russian.join(", "),30)," ")}}function gt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"button",15),s.ac("click",(function(){return s.sc(t),s.ec(2).pronounce()})),s.Ac(1),s.Rb()}if(2&t){const t=s.ec(2);s.Bb(1),s.Cc(" ",t.word.transcription," ")}}function wt(t,e){if(1&t&&(s.Sb(0,"div",16),s.Ac(1),s.Rb()),2&t){const t=s.ec(2);s.Bb(1),s.Cc(" ",t.word.russian.join(", ")," ")}}function mt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",3),s.yc(1,gt,2,1,"button",4),s.Sb(2,"div",5),s.Sb(3,"div",6),s.Ob(4,"img",7),s.Rb(),s.yc(5,wt,2,1,"div",8),s.Rb(),s.Sb(6,"p",9),s.Ac(7),s.Rb(),s.Rb(),s.Sb(8,"mat-action-row",10),s.Sb(9,"p",11),s.Ac(10),s.fc(11,"date"),s.Rb(),s.Sb(12,"div",12),s.Sb(13,"button",13),s.ac("click",(function(){return s.sc(t),s.ec().onDelete()})),s.Ac(14," Delete "),s.Rb(),s.Sb(15,"button",14),s.ac("click",(function(){return s.sc(t),s.ec().onEdit()})),s.Ac(16," Edit "),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.ec();s.Bb(1),s.kc("ngIf",t.word.transcription),s.Bb(3),s.kc("src",t.word.pic_url,s.tc)("alt",t.word.english),s.Bb(1),s.kc("ngIf",t.isPanelOpened),s.Bb(2),s.Cc(" ",t.word.text," "),s.Bb(3),s.Cc("Added ",s.hc(11,6,t.date,"d MMMM y"),"")}}let St=(()=>{class t{constructor(t,e){this.wordService=t,this.utilsService=e,this.showEditing=new s.n,this.isPanelOpened=!1}ngOnInit(){this.date=new Date(this.word.createdAt)}onDelete(){this.wordService.deleteWord(this.word.id,this.setId)}onEdit(){this.showEditing.emit(this.word)}pronounce(){this.utilsService.onPronounce(this.word.sound_url)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(w),s.Nb(f.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-word"]],inputs:{setId:"setId",word:"word"},outputs:{showEditing:"showEditing"},decls:6,vars:2,consts:[[3,"opened","closed"],[4,"ngIf"],["matExpansionPanelContent",""],[1,"content"],["mat-button","","class","content__transcription",3,"click",4,"ngIf"],[1,"content__top"],[1,"picture__container"],[1,"picture",3,"src","alt"],["class","content__translation",4,"ngIf"],[1,"text--plain"],[1,"action"],[1,"date"],[1,"buttons"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",1,"content__transcription",3,"click"],[1,"content__translation"]],template:function(t,e){1&t&&(s.Sb(0,"mat-expansion-panel",0),s.ac("opened",(function(){return e.isPanelOpened=!0}))("closed",(function(){return e.isPanelOpened=!1})),s.Sb(1,"mat-expansion-panel-header"),s.Sb(2,"mat-panel-title"),s.Ac(3),s.Rb(),s.yc(4,ft,3,4,"mat-panel-description",1),s.Rb(),s.yc(5,mt,17,9,"ng-template",2),s.Rb()),2&t&&(s.Bb(3),s.Cc(" ",e.word.english," "),s.Bb(1),s.kc("ngIf",!e.isPanelOpened))},directives:[pt.b,pt.f,pt.g,G.l,pt.d,pt.e,pt.c,z.b],pipes:[bt,G.e],styles:[".text--plain[_ngcontent-%COMP%]{color:grey}.content[_ngcontent-%COMP%]{flex-direction:column}.content[_ngcontent-%COMP%], .content__top[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.content__transcription[_ngcontent-%COMP%]{align-self:flex-start}.picture__container[_ngcontent-%COMP%]{width:300px}.picture[_ngcontent-%COMP%]{max-width:100%;height:auto}.action[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),t})();var kt=n("R0Ic"),yt=n("3Pt+");function _t(t,e){if(1&t){const t=s.Tb();s.Sb(0,"button",16),s.ac("click",(function(){return s.sc(t),s.ec().onUpdateWord()})),s.Sb(1,"mat-icon"),s.Ac(2,"save"),s.Rb(),s.Rb()}}function vt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"mat-form-field",14),s.Sb(1,"mat-label"),s.Ac(2,"Picture url"),s.Rb(),s.Sb(3,"input",15),s.ac("ngModelChange",(function(e){return s.sc(t),s.ec().currentImage=e})),s.Rb(),s.Rb()}if(2&t){const t=s.ec();s.Bb(3),s.kc("ngModel",t.currentImage)}}function It(t,e){if(1&t){const t=s.Tb();s.Sb(0,"mat-icon",18),s.ac("click",(function(){s.sc(t);const e=s.ec().$implicit;return s.ec().onDeleteTranslation(e)})),s.Ac(1,"delete"),s.Rb()}}function Tt(t,e){if(1&t&&(s.Sb(0,"p"),s.Ac(1),s.yc(2,It,2,0,"mat-icon",17),s.Rb()),2&t){const t=e.$implicit,n=s.ec();s.Bb(1),s.Cc(" ",t," "),s.Bb(1),s.kc("ngIf",n.currentTranslations.length>1)}}let Ot=(()=>{class t{constructor(t,e){this.wordService=t,this.utilsService=e,this.state="hidden",this.hide=new s.n,this.showPictureInput=!1,this.currentImage="",this.currentText=""}ngOnInit(){setTimeout(()=>this.state="displayed",0),this.currentImage=this.word.pic_url,this.currentTranslations=[...this.word.russian],this.currentText=this.word.text}onUpdateWord(){this.word.pic_url=this.currentImage,this.word.russian=this.currentTranslations,this.word.text=this.currentText,this.wordService.editWord(this.word),this.closeItself()}onDeleteTranslation(t){this.currentTranslations=this.currentTranslations.filter(e=>e!==t)}onHide(t){t.target===t.currentTarget&&this.closeItself()}onPronounce(){this.utilsService.onPronounce(this.word.sound_url)}hasAnythingChanged(){return!(this.word.pic_url===this.currentImage&&this.word.russian.join("")===this.currentTranslations.join("")&&this.currentText===this.word.text)}closeItself(){this.state="hidden",setTimeout(()=>this.hide.emit(null),500)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(w),s.Nb(f.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-word-edit"]],inputs:{word:"word"},outputs:{hide:"hide"},decls:26,vars:10,consts:[[1,"container",3,"click"],[1,"form"],["mat-icon-button","","color","primary","class","save",3,"click",4,"ngIf"],["mat-button","",1,"form__wordTranscription",3,"click"],[1,"top"],[1,"left","form__image-container"],[1,"form__picture",3,"src","alt"],["mat-icon-button","","color","primary",1,"form__buttonChangePicture",3,"click"],["class","form__group",4,"ngIf"],[1,"middle"],[1,"form__word-translations"],[1,"translations__title"],[4,"ngFor","ngForOf"],[1,"bottom"],[1,"form__group"],["matInput","",3,"ngModel","ngModelChange"],["mat-icon-button","","color","primary",1,"save",3,"click"],["class","form__icon","color","accent",3,"click",4,"ngIf"],["color","accent",1,"form__icon",3,"click"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.ac("click",(function(t){return e.onHide(t)})),s.Sb(1,"mat-card",1),s.yc(2,_t,3,0,"button",2),s.Sb(3,"mat-card-header"),s.Sb(4,"mat-card-title"),s.Ac(5),s.Rb(),s.Sb(6,"mat-card-subtitle"),s.Sb(7,"button",3),s.ac("click",(function(){return e.onPronounce()})),s.Ac(8),s.Rb(),s.Rb(),s.Rb(),s.Sb(9,"div",4),s.Sb(10,"div",5),s.Ob(11,"img",6),s.Sb(12,"button",7),s.ac("click",(function(){return e.showPictureInput=!e.showPictureInput})),s.Sb(13,"mat-icon"),s.Ac(14),s.Rb(),s.Rb(),s.yc(15,vt,4,1,"mat-form-field",8),s.Rb(),s.Sb(16,"div",9),s.Sb(17,"div",10),s.Sb(18,"p",11),s.Ac(19,"Translations"),s.Rb(),s.yc(20,Tt,3,2,"p",12),s.Rb(),s.Rb(),s.Rb(),s.Sb(21,"div",13),s.Sb(22,"mat-form-field",14),s.Sb(23,"mat-label"),s.Ac(24,"Context of word"),s.Rb(),s.Sb(25,"textarea",15),s.ac("ngModelChange",(function(t){return e.currentText=t})),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.Bb(1),s.kc("@editState",e.state),s.Bb(1),s.kc("ngIf",e.hasAnythingChanged()),s.Bb(3),s.Bc(e.word.english),s.Bb(3),s.Cc(" [",e.word.transcription,"] "),s.Bb(3),s.kc("src",e.currentImage,s.tc)("alt",e.word.english),s.Bb(3),s.Bc(e.showPictureInput?"save":"edit"),s.Bb(1),s.kc("ngIf",e.showPictureInput),s.Bb(5),s.kc("ngForOf",e.currentTranslations),s.Bb(5),s.kc("ngModel",e.currentText))},directives:[st.a,G.l,st.d,st.g,st.f,z.b,Y.a,G.k,F.c,F.f,U.a,yt.b,yt.l,yt.o],styles:[".container[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center}.form[_ngcontent-%COMP%]{width:600px}.form__image-container[_ngcontent-%COMP%]{width:200px;position:relative}.form__buttonChangePicture[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.form__picture[_ngcontent-%COMP%]{max-width:100%;height:auto}.form__group[_ngcontent-%COMP%]{width:100%}.form__icon[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.top[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-card[_ngcontent-%COMP%]{position:relative}.save[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.translations__title[_ngcontent-%COMP%]{margin-top:0;font-weight:600}"],data:{animation:[Object(kt.n)("editState",[Object(kt.k)("hidden",Object(kt.l)({transform:"translateY(-200%)"})),Object(kt.k)("displayed",Object(kt.l)({transform:"translateY(0)"})),Object(kt.m)("hidden <=> displayed",Object(kt.e)(500))])]}}),t})();function Ct(t,e){if(1&t){const t=s.Tb();s.Sb(0,"app-manage-words",7),s.ac("uncheckWords",(function(){return s.sc(t),s.ec().uncheckWords()}))("setCheckAll",(function(e){return s.sc(t),s.ec().setCheckAll(e)})),s.Rb()}if(2&t){const t=s.ec();s.kc("setId",t.setId)("checkedWords",t.checkedWords)("checkAll",t.checkAll)}}function Wt(t,e){if(1&t&&(s.Sb(0,"p",10),s.Ac(1),s.fc(2,"date"),s.Rb()),2&t){const t=s.ec().$implicit;s.Bb(1),s.Cc(" ",s.hc(2,1,t.title,"d MMMM y")," ")}}function At(t,e){if(1&t){const t=s.Tb();s.Sb(0,"mat-checkbox",11),s.ac("change",(function(){s.sc(t);const e=s.ec().$implicit;return s.ec().onCheckBoxChange(e)})),s.Rb(),s.Sb(1,"app-word",12),s.ac("showEditing",(function(e){return s.sc(t),s.ec(2).toggleEditing(e)})),s.Rb()}if(2&t){const t=s.ec().$implicit,e=s.ec();s.kc("checked",e.checkAll||t.isChecked),s.Bb(1),s.kc("word",t)("setId",e.setId)}}function Rt(t,e){if(1&t&&(s.Qb(0),s.yc(1,Wt,3,4,"p",8),s.yc(2,At,2,3,"ng-template",null,9,s.zc),s.Pb()),2&t){const t=e.$implicit,n=s.pc(3);s.Bb(1),s.kc("ngIf",t.title)("ngIfElse",n)}}function xt(t,e){1&t&&(s.Sb(0,"p",13),s.Ac(1," Nothing added yet "),s.Rb())}function Pt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"app-word-edit",14),s.ac("hide",(function(e){return s.sc(t),s.ec().toggleEditing(e)})),s.Rb()}if(2&t){const t=s.ec();s.kc("word",t.word)}}let Mt=(()=>{class t{constructor(t,e,n){this.wordService=t,this.route=e,this.utilsService=n,this.showEdit=!1,this.checkedWords=[],this.checkAll=!1,this.currentPage=0}ngOnInit(){this.setId=this.route.snapshot.params.id;const t=this.route.snapshot.params.setName;this.title=t?t.split("_").join(" "):"dictionary",this.route.data.subscribe(t=>{this.words=t.words}),this.subscription=this.wordService.wordsUpdateListener$.pipe(Object(o.a)(this.utilsService.addDateAmongWords)).subscribe(t=>{this.words=t}),this.wordsCount$=this.wordService.wordsCount$}toggleEditing(t){this.showEdit=!this.showEdit,this.word=t,document.body.style.overflowY=this.showEdit?"hidden":""}onCheckBoxChange(t){this.checkedWords.find(e=>e.id===t.id)?this.checkedWords=this.checkedWords.filter(e=>e!==t):this.checkedWords.push(t),t.isChecked=!t.isChecked}onScroll(){this.words.length<20||(this.currentPage++,this.wordService.getWords({setId:this.setId,startsFrom:this.currentPage,isCachingWords:!0}))}setCheckAll(t){this.uncheckWords(),this.checkAll=t}uncheckWords(){this.checkedWords=this.checkedWords.filter(t=>(t.isChecked=!1,!1)),this.checkAll=!1}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(w),s.Nb(i.a),s.Nb(f.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-dictionary"]],decls:12,vars:11,consts:[["infinite-scroll","",1,"dictionary",3,"scrolled"],[1,"dictionary__header"],[3,"setId"],[3,"setId","checkedWords","checkAll","uncheckWords","setCheckAll",4,"ngIf"],[4,"ngFor","ngForOf"],["class","dictionary__empty",4,"ngIf"],[3,"word","hide",4,"ngIf"],[3,"setId","checkedWords","checkAll","uncheckWords","setCheckAll"],["class","date-title",4,"ngIf","ngIfElse"],["wordAlternative",""],[1,"date-title"],["color","primary",1,"dictionary__checkbox",3,"checked","change"],[1,"dictionary__word",3,"word","setId","showEditing"],[1,"dictionary__empty"],[3,"word","hide"]],template:function(t,e){1&t&&(s.Sb(0,"section",0),s.ac("scrolled",(function(){return e.onScroll()})),s.Sb(1,"header",1),s.Sb(2,"h1"),s.Ac(3),s.fc(4,"uppercase"),s.fc(5,"async"),s.Rb(),s.Ob(6,"app-word-create",2),s.yc(7,Ct,1,3,"app-manage-words",3),s.Rb(),s.Sb(8,"mat-card"),s.yc(9,Rt,4,2,"ng-container",4),s.yc(10,xt,2,0,"p",5),s.Rb(),s.Rb(),s.yc(11,Pt,1,1,"app-word-edit",6)),2&t&&(s.Bb(3),s.Dc("",s.gc(4,7,e.title)," (",s.gc(5,9,e.wordsCount$)," words)"),s.Bb(3),s.kc("setId",e.setId),s.Bb(1),s.kc("ngIf",null==e.words?null:e.words.length),s.Bb(2),s.kc("ngForOf",e.words),s.Bb(1),s.kc("ngIf",!(null!=e.words&&e.words.length)),s.Bb(1),s.kc("ngIf",e.showEdit))},directives:[L,ot,G.l,st.a,G.k,ht,lt.a,St,Ot],pipes:[G.r,G.b,G.e],styles:[".dictionary[_ngcontent-%COMP%]{margin:0 auto;width:60%}.dictionary__button[_ngcontent-%COMP%]{align-self:center}.dictionary__empty[_ngcontent-%COMP%]{text-align:center;grid-column-end:span 2;justify-self:center}.dictionary__wordholder[_ngcontent-%COMP%]{display:flex;align-items:center}.dictionary__checkbox[_ngcontent-%COMP%]{margin-right:16px}.dictionary__word[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:35px 1fr;align-items:center;row-gap:5px}.date-title[_ngcontent-%COMP%]{grid-column-start:span 2;font-weight:500;justify-self:center}"]}),t})();var jt=n("SxV6");const Dt=[{path:"",component:Mt,resolve:{words:(()=>{class t{constructor(t,e){this.wordService=t,this.utilsService=e}resolve(t,e){const n={setId:t.paramMap.get("id")};return this.wordService.emptyWords(),this.wordService.getWords(n),this.wordService.wordsUpdateListener$.pipe(Object(jt.a)(),Object(o.a)(this.utilsService.addDateAmongWords))}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(w),s.Wb(f.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let Bt=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(Dt)],i.g]}),t})();var Et=n("PCNd");let Nt=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[Bt,Et.a,K]]}),t})()}}]);