function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{YuuO:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthModule",(function(){return L}));var r=n("tyNb"),i=n("ahC7"),a=n("pLZG"),o=n("eIep"),c=n("fXoL"),u=n("7dP1"),s=n("tXUu"),l=n("Wp6s"),m=n("ofXK"),b=n("bTqV"),h=n("3Pt+"),f=n("Kj3r"),p=n("/uUt"),d=n("lJxs"),g=n("SxV6"),v=n("kmnG"),S=n("qFsG");function y(t,e){1&t&&(c.Sb(0,"mat-error"),c.Ac(1,"Username must be at least 4 characters long"),c.Rb())}function k(t,e){1&t&&(c.Sb(0,"mat-error"),c.Ac(1,"Username already taken"),c.Rb())}function w(t,e){1&t&&(c.Sb(0,"mat-error"),c.Ac(1,"Email already taken"),c.Rb())}function C(t,e){1&t&&(c.Sb(0,"mat-error"),c.Ac(1,"Email must be valid"),c.Rb())}function F(t,e){1&t&&(c.Sb(0,"mat-error"),c.Ac(1,"Password must be at least 8 characters long"),c.Rb())}var O,R=((O=function(){function t(e,n){_classCallCheck(this,t),this.authService=e,this.router=n}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeForm()}},{key:"onSubmit",value:function(){var t=this;this.authForm.valid&&(this.subscription=this.authService.signup(this.authForm.value).subscribe((function(){t.router.navigate(["/auth/login"])})))}},{key:"initializeForm",value:function(){this.authForm=new h.e({email:new h.c("",[h.r.required,h.r.email],this.isFieldTaken.bind(this,"email")),password:new h.c("",[h.r.required,h.r.minLength(8)]),username:new h.c("",[h.r.required,h.r.minLength(4)],this.isFieldTaken.bind(this,"username"))})}},{key:"isFieldTaken",value:function(t,e){var n=this;return e.valueChanges.pipe(Object(f.a)(1e3),Object(p.a)(),Object(o.a)((function(){return n.authService.checkIfTaken(t,e.value)})),Object(d.a)((function(t){return t.isPresent?t:null})),Object(g.a)())}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||O)(c.Nb(u.a),c.Nb(r.c))},O.\u0275cmp=c.Hb({type:O,selectors:[["app-signup"]],decls:20,vars:7,consts:[[3,"formGroup","ngSubmit"],["required","","matInput","","formControlName","username"],[4,"ngIf"],["type","email","minlength","8","required","","matInput","","formControlName","email"],["minlength","8","required","","matInput","","type","password","formControlName","password"],["type","submit","mat-raised-button","",3,"disabled"]],template:function(t,e){1&t&&(c.Sb(0,"form",0),c.ac("ngSubmit",(function(){return e.onSubmit()})),c.Sb(1,"mat-form-field"),c.Sb(2,"mat-label"),c.Ac(3,"Username"),c.Rb(),c.Ob(4,"input",1),c.yc(5,y,2,0,"mat-error",2),c.yc(6,k,2,0,"mat-error",2),c.Rb(),c.Sb(7,"mat-form-field"),c.Sb(8,"mat-label"),c.Ac(9,"Email"),c.Rb(),c.Ob(10,"input",3),c.yc(11,w,2,0,"mat-error",2),c.yc(12,C,2,0,"mat-error",2),c.Rb(),c.Sb(13,"mat-form-field"),c.Sb(14,"mat-label"),c.Ac(15,"Password"),c.Rb(),c.Ob(16,"input",4),c.yc(17,F,2,0,"mat-error",2),c.Rb(),c.Sb(18,"button",5),c.Ac(19," Submit "),c.Rb(),c.Rb()),2&t&&(c.kc("formGroup",e.authForm),c.Bb(5),c.kc("ngIf",e.authForm.get("username").touched&&(null==e.authForm.get("username").errors?null:e.authForm.get("username").errors.minlength)),c.Bb(1),c.kc("ngIf",e.authForm.get("username").touched&&(null==e.authForm.get("username").errors?null:e.authForm.get("username").errors.isPresent)),c.Bb(5),c.kc("ngIf",e.authForm.get("email").touched&&(null==e.authForm.get("email").errors?null:e.authForm.get("email").errors.isPresent)),c.Bb(1),c.kc("ngIf",e.authForm.get("email").touched&&(null==e.authForm.get("email").errors?null:e.authForm.get("email").errors.email)),c.Bb(5),c.kc("ngIf",e.authForm.get("password").touched&&(null==e.authForm.get("password").errors?null:e.authForm.get("password").errors.minlength)),c.Bb(1),c.kc("disabled",!e.authForm.valid))},directives:[h.s,h.m,h.f,v.c,v.f,S.a,h.b,h.q,h.l,h.d,m.l,h.h,b.b,v.b],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}"]}),O);function I(t,e){1&t&&(c.Sb(0,"span",5),c.Ac(1,"Invalid email or password"),c.Rb())}var A,P=((A=function(){function t(e,n){_classCallCheck(this,t),this.authService=e,this.router=n,this.isError=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeForm()}},{key:"onSubmit",value:function(){var t=this;this.authForm.valid&&this.authService.login(this.authForm.value).subscribe((function(e){t.authService.initializeAuthState(e),t.router.navigate(["/dictionary"])}),(function(e){t.isError=404===e.status}))}},{key:"initializeForm",value:function(){this.authForm=new h.e({email:new h.c("",[h.r.required,h.r.email]),password:new h.c("",h.r.required)})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||A)(c.Nb(u.a),c.Nb(r.c))},A.\u0275cmp=c.Hb({type:A,selectors:[["app-login"]],decls:12,vars:3,consts:[[3,"formGroup","ngSubmit"],["class","incorrectCredentials",4,"ngIf"],["type","email","matInput","","formControlName","email"],["matInput","","type","password","formControlName","password"],["type","submit","mat-raised-button","",3,"disabled"],[1,"incorrectCredentials"]],template:function(t,e){1&t&&(c.Sb(0,"form",0),c.ac("ngSubmit",(function(){return e.onSubmit()})),c.yc(1,I,2,0,"span",1),c.Sb(2,"mat-form-field"),c.Sb(3,"mat-label"),c.Ac(4,"Email"),c.Rb(),c.Ob(5,"input",2),c.Rb(),c.Sb(6,"mat-form-field"),c.Sb(7,"mat-label"),c.Ac(8,"Password"),c.Rb(),c.Ob(9,"input",3),c.Rb(),c.Sb(10,"button",4),c.Ac(11," Submit "),c.Rb(),c.Rb()),2&t&&(c.kc("formGroup",e.authForm),c.Bb(1),c.kc("ngIf",e.isError),c.Bb(9),c.kc("disabled",!e.authForm.valid))},directives:[h.s,h.m,h.f,m.l,v.c,v.f,S.a,h.b,h.l,h.d,b.b],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.incorrectCredentials[_ngcontent-%COMP%]{color:red;padding:10px 0}"]}),A);function _(t,e){1&t&&c.Ob(0,"app-signup")}function N(t,e){1&t&&c.Ob(0,"app-login")}var j,B,x,q=((j=function(){function t(e,n,r,i){_classCallCheck(this,t),this.route=e,this.router=n,this.socialAuthService=r,this.authService=i}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.url.subscribe((function(e){t.form=e[0].path})),this.socialAuthService.authState.pipe(Object(a.a)((function(t){return!!t})),Object(o.a)((function(e){return t.authService.googleAuth(e)}))).subscribe((function(e){t.authService.initializeAuthState(e),t.router.navigate(["/dictionary"]),t.socialAuthService.signOut()}))}},{key:"signInWithGoogle",value:function(){this.socialAuthService.signIn(i.a.PROVIDER_ID)}},{key:"onNavigate",value:function(){this.router.navigate(["/auth/".concat("signup"===this.form?"login":"signup")])}}]),t}()).\u0275fac=function(t){return new(t||j)(c.Nb(r.a),c.Nb(r.c),c.Nb(i.b),c.Nb(u.a))},j.\u0275cmp=c.Hb({type:j,selectors:[["app-auth"]],decls:14,vars:6,consts:[[4,"ngIf"],[1,"social-medias"],["mat-raised-button","","color","warn",3,"click"],[3,"click"]],template:function(t,e){1&t&&(c.Sb(0,"app-centered-projection"),c.Sb(1,"mat-card"),c.Sb(2,"mat-card-header"),c.Sb(3,"mat-card-title"),c.Ac(4),c.fc(5,"uppercase"),c.Rb(),c.Rb(),c.yc(6,_,1,0,"app-signup",0),c.yc(7,N,1,0,"app-login",0),c.Sb(8,"div",1),c.Sb(9,"button",2),c.ac("click",(function(){return e.signInWithGoogle()})),c.Ac(10," Sign in with google "),c.Rb(),c.Rb(),c.Sb(11,"mat-card-actions"),c.Sb(12,"p",3),c.ac("click",(function(){return e.onNavigate()})),c.Ac(13),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.Bb(4),c.Bc(c.gc(5,4,e.form)),c.Bb(2),c.kc("ngIf","signup"===e.form),c.Bb(1),c.kc("ngIf","login"===e.form),c.Bb(6),c.Cc(" ","signup"===e.form?"Have an account? Log in":"Don't have an account? Sign up"," "))},directives:[s.a,l.a,l.d,l.g,m.l,b.b,l.b,R,P],pipes:[m.r],styles:["mat-card[_ngcontent-%COMP%]{width:400px}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-card-actions[_ngcontent-%COMP%]{text-align:center}mat-card-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}.social-medias[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:center}"]}),j),M=[{path:"login",component:q},{path:"signup",component:q}],E=((B=function t(){_classCallCheck(this,t)}).\u0275mod=c.Lb({type:B}),B.\u0275inj=c.Kb({factory:function(t){return new(t||B)},imports:[[r.g.forChild(M)],r.g]}),B),G=n("PCNd"),L=((x=function t(){_classCallCheck(this,t)}).\u0275mod=c.Lb({type:x}),x.\u0275inj=c.Kb({factory:function(t){return new(t||x)},imports:[[E,G.a,h.p]]}),x)}}]);