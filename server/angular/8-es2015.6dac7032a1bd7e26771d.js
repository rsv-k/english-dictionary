(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Tur3:function(t,e,n){"use strict";n.r(e),n.d(e,"LearnModule",(function(){return Z}));var i=n("tyNb"),r=n("fXoL"),s=n("GOW1"),o=n("ofXK"),c=n("Wp6s");function a(t,e){if(1&t&&(r.Sb(0,"mat-card-subtitle"),r.zc(1),r.Rb()),2&t){const t=r.ec();r.Bb(1),r.Bc(" ",t.wordsAmount," words to learn ")}}let l=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-learn-game-card"]],inputs:{title:"title",wordsAmount:"wordsAmount"},decls:5,vars:2,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(r.Sb(0,"mat-card"),r.Sb(1,"mat-card-header"),r.Sb(2,"mat-card-title"),r.zc(3),r.Rb(),r.xc(4,a,2,1,"mat-card-subtitle",0),r.Rb(),r.Rb()),2&t&&(r.Bb(3),r.Bc(" ",e.title," "),r.Bb(1),r.kc("ngIf",e.wordsAmount))},directives:[c.a,c.d,c.g,o.l,c.f],styles:["mat-card[_ngcontent-%COMP%]{height:100px;margin-bottom:10px;cursor:pointer}"]}),t})();function u(t,e){if(1&t){const t=r.Tb();r.Sb(0,"app-learn-game-card",3),r.ac("click",(function(){r.rc(t);const n=e.$implicit;return r.ec().onNavigate(n)})),r.Rb()}if(2&t){const t=e.$implicit;r.kc("title",t.title)("wordsAmount",t.wordsQuantity)}}let h=(()=>{class t{constructor(t,e,n){this.learnService=t,this.route=e,this.router=n,this.games=[]}ngOnInit(){this.route.data.subscribe(t=>{const e=this.learnService.getAvailableGames();for(let n=0;n<t.quantities.length;n++)this.games.push({title:e[n],wordsQuantity:t.quantities[n]})})}onNavigate(t){const e=t.title.split(" ").join("_").toLowerCase();this.router.navigate(["/learn/"+e])}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(i.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-learn"]],decls:6,vars:1,consts:[[1,"learn"],[1,"games"],[3,"title","wordsAmount","click",4,"ngFor","ngForOf"],[3,"title","wordsAmount","click"]],template:function(t,e){1&t&&(r.Sb(0,"section",0),r.Sb(1,"header"),r.Sb(2,"h1"),r.zc(3,"Training"),r.Rb(),r.Rb(),r.Sb(4,"main",1),r.xc(5,u,1,2,"app-learn-game-card",2),r.Rb(),r.Rb()),2&t&&(r.Bb(5),r.kc("ngForOf",e.games))},directives:[o.k,l],styles:[".learn[_ngcontent-%COMP%]{width:60%;margin:0 auto}app-learn-game-card[_ngcontent-%COMP%]:focus{outline:0}"]}),t})();var d=n("lJxs"),b=n("vkgz");let g=(()=>{class t{constructor(t,e){this.learnService=t,this.router=e}canActivate(t,e){let n=e.url.split("/")[2].split("_").join(" ");n=n[0].toUpperCase()+n.slice(1).toLowerCase();const i=this.learnService.getAvailableGames().findIndex(t=>t===n);return this.learnService.getQuantities().pipe(Object(d.a)(t=>!!t[i]),Object(b.a)(t=>{t||this.router.navigate(["/learn"])}))}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s.a),r.Wb(i.c))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=n("R0Ic"),m=n("OiFK"),f=n("bTqV");function w(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",4),r.ac("click",(function(){r.rc(t);const n=e.$implicit;return r.ec().onAnswer(n)})),r.zc(1),r.Rb()}if(2&t){const t=e.$implicit,n=e.index;r.kc("color",null==t?null:t.color),r.Cb("data-before",n+1),r.Bb(1),r.Bc(" ",t.value," ")}}let v=(()=>{class t{constructor(t,e,n){this.learnService=t,this.router=e,this.utilsService=n,this.timeoutHolder=null}onkeyup(t){[1,2,3,4,5].includes(+t.key)&&!this.isPauseBeforeStart&&this.onAnswer(this.options[+t.key-1])}ngOnInit(){this.initialieState(),this.wordsSubscription=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.currentWord=this.words[this.results.length],this.animationMove()}),this.learnService.getWordsToLearn(null,3),this.optionsSubscription=this.learnService.randomOptionsUpdateListener$.subscribe(t=>{this.options=t.map(t=>({value:t,isCorrect:!1})),this.options.push({value:this.currentWord.russian.join(","),isCorrect:!0}),this.options=this.utilsService.shuffleArray(this.options)})}onAnswer(t){if(!this.isPauseBeforeStart){if(clearTimeout(this.timeoutHolder),this.highlightCorrectAndClicked(t),this.isPauseBeforeStart=!0,this.addResult(t.isCorrect),this.results.length===this.words.length)return this.finishGame();this.state="start",this.getNextWord(),this.timeoutHolder=setTimeout(()=>this.animationMove(),1e3)}}learnAgain(){this.initialieState(),this.learnService.getWordsToLearn(!1,3)}requestNewOptions(){this.learnService.getRandomOptions(this.currentWord.russian,"russian")}finishGame(){clearTimeout(this.timeoutHolder);const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,3,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Savannah",result:this.results}})}highlightCorrectAndClicked(t){t.color="warn",this.options.find(t=>t.isCorrect).color="primary"}animationMove(){this.requestNewOptions(),clearTimeout(this.timeoutHolder),this.isPauseBeforeStart=!1,this.state="move",this.timeoutHolder=setTimeout(()=>{this.addResult(!1),this.getNextWord(),this.state="start",this.timeoutHolder=setTimeout(()=>this.animationMove(),1e3)},5e3)}addResult(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}getNextWord(){this.currentWord=this.words[this.results.length]}initialieState(){this.state="start",this.isPauseBeforeStart=!1,this.results=[],this.words=[],this.options=[],this.currentWord=null}ngOnDestroy(){this.wordsSubscription.unsubscribe(),this.optionsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(i.c),r.Nb(m.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-savannah"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.qc)},decls:6,vars:3,consts:[[1,"game"],[1,"game__gameplay"],[1,"options"],["class","option","mat-raised-button","",3,"color","click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"option",3,"color","click"]],template:function(t,e){1&t&&(r.Sb(0,"section",0),r.Sb(1,"div",1),r.Sb(2,"p"),r.zc(3),r.Rb(),r.Sb(4,"div",2),r.xc(5,w,2,3,"button",3),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(2),r.kc("@moveDown",e.state),r.Bb(1),r.Ac(null==e.currentWord?null:e.currentWord.english),r.Bb(2),r.kc("ngForOf",e.options))},directives:[o.k,f.b],styles:[".game[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:calc(100vh - 64px)}p[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translateX(-50%)}button[_ngcontent-%COMP%]{white-space:pre-wrap!important;display:block;margin-bottom:10px}mat-card[_ngcontent-%COMP%]{justify-content:space-between}.options[_ngcontent-%COMP%]{width:100%}.option[_ngcontent-%COMP%]{position:relative}.option[_ngcontent-%COMP%]:before{content:attr(data-before);position:absolute;left:-15px;color:grey;font-size:1em}"],data:{animation:[Object(p.n)("moveDown",[Object(p.k)("start",Object(p.l)({bottom:"calc(100vh - 100px)"})),Object(p.k)("move",Object(p.l)({bottom:0})),Object(p.m)("start => move",Object(p.e)(5e3))])]}}),t})();var k=n("tXUu"),S=n("f0Cb"),C=n("NFeN");function O(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",12),r.Sb(1,"button",13),r.ac("click",(function(){return r.rc(t),r.ec(2).onPronounce()})),r.Sb(2,"mat-icon"),r.zc(3,"volume_up"),r.Rb(),r.Rb(),r.Sb(4,"h3",14),r.zc(5),r.Rb(),r.Sb(6,"h4",15),r.zc(7),r.Rb(),r.Rb()}if(2&t){const t=r.ec(2);r.Bb(5),r.Ac(t.currentWord.english),r.Bb(2),r.Bc(" [",t.currentWord.transcription,"] ")}}function _(t,e){if(1&t&&(r.Sb(0,"span",14),r.zc(1),r.Rb()),2&t){const t=r.ec(2);r.Bb(1),r.Bc(" ",t.currentWord.russian.join(",")," ")}}function y(t,e){if(1&t){const t=r.Tb();r.Qb(0),r.Sb(1,"button",16),r.ac("click",(function(){r.rc(t);const n=e.$implicit;return r.ec(2).onAnswer(n)})),r.zc(2),r.Rb(),r.Pb()}if(2&t){const t=e.$implicit,n=e.index;r.Bb(1),r.kc("color",null==t?null:t.color),r.Cb("data-before",n+1),r.Bb(1),r.Bc(" ",t.value," ")}}function R(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",1),r.Sb(1,"p",2),r.zc(2),r.Rb(),r.Sb(3,"mat-card",3),r.Sb(4,"div",4),r.Sb(5,"div",5),r.xc(6,O,8,2,"div",6),r.xc(7,_,2,1,"span",7),r.Rb(),r.Sb(8,"div",8),r.xc(9,y,3,3,"ng-container",9),r.Rb(),r.Rb(),r.Ob(10,"mat-divider"),r.Sb(11,"mat-card-actions",10),r.Sb(12,"button",11),r.ac("click",(function(){return r.rc(t),r.ec().onNothing()})),r.zc(13),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&t){const t=r.ec();r.Bb(2),r.Ac(t.currentPlayNumber+" / "+t.words.length),r.Bb(4),r.kc("ngIf","word-translation"===t.gameName),r.Bb(1),r.kc("ngIf","translation-word"===t.gameName),r.Bb(2),r.kc("ngForOf",t.options),r.Bb(3),r.kc("color",t.isOptionClicked?"primary":"warn"),r.Bb(1),r.Bc(" ",t.isOptionClicked?"Continue":"I don't know"," ")}}let x=(()=>{class t{constructor(t,e,n,i){this.route=t,this.learnService=e,this.utilsService=n,this.router=i,this.games={"word-translation":1,"translation-word":2},this.isOptionClicked=!1}onkeyup(t){if([1,2,3,4,5].includes(+t.key)||"Enter"===t.key)return"Enter"===t.key?this.onNothing():void this.onAnswer(this.options[+t.key-1])}ngOnInit(){this.initializeState(),this.learnService.getWordsToLearn(null,this.games[this.gameName]),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.requestNewRandomOptions()}),this.subscriptionOptions=this.learnService.randomOptionsUpdateListener$.subscribe(t=>{this.options=t.map(t=>({value:t,isCorrect:!1})),this.shakeOptions(),1===this.games[this.gameName]&&this.onPronounce()})}onAnswer(t){this.isOptionClicked?(this.requestNewRandomOptions(),this.currentPlayNumber++):(2===this.games[this.gameName]&&this.onPronounce(),this.addResult(t.isCorrect),this.highlightCorrectAndChosenOption(t)),this.isOptionClicked=!this.isOptionClicked}onNothing(){this.isOptionClicked?(this.requestNewRandomOptions(),this.currentPlayNumber++):(this.addResult(!1),2===this.games[this.gameName]&&(this.onPronounce(),this.highlightCorrectAndChosenOption())),this.isOptionClicked=!this.isOptionClicked}onPronounce(){this.utilsService.onPronounce(this.currentWord.sound_url)}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(null,this.games[this.gameName])}addResult(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}requestNewRandomOptions(){this.getNextWord();const t={"word-translation":"russian","translation-word":"english"}[this.gameName];this.currentWord&&this.learnService.getRandomOptions(this.currentWord[t],t)}shakeOptions(){const t={value:"russian"==={"word-translation":"russian","translation-word":"english"}[this.gameName]?this.currentWord.russian.join(","):this.currentWord.english,isCorrect:!0},e=Math.floor(5*Math.random());this.options[4]=this.options[e],this.options[e]=t}initializeState(){this.gameName=this.route.snapshot.data.gameName,this.results=[],this.words=[],this.currentWord=null,this.options=[],this.isOptionClicked=!1,this.currentPlayNumber=1}highlightCorrectAndChosenOption(t){t&&(t.color="warn"),this.options.find(t=>t.isCorrect).color="primary"}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,this.games[this.gameName],!1),this.router.navigate(["/learn/result"],{state:{gameName:this.gameName,result:this.results}})}getNextWord(){this.words[this.results.length]||this.finishGame(),this.currentWord=this.words[this.results.length]}ngOnDestroy(){this.subscriptionOptions.unsubscribe(),this.subscriptionWords.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(s.a),r.Nb(m.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-word-translation-word"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.qc)},decls:2,vars:1,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"game__top"],[1,"game__left"],["class","word-translation",4,"ngIf"],["class","game__wordName",4,"ngIf"],[1,"game__right"],[4,"ngFor","ngForOf"],[1,"game__bottom"],["mat-raised-button","",1,"button-nothing",3,"color","click"],[1,"word-translation"],["mat-icon-button","",3,"click"],[1,"game__wordName"],[1,"game__transcription"],["mat-raised-button","",1,"game__option",3,"color","click"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.xc(1,R,14,6,"div",0),r.Rb()),2&t&&(r.Bb(1),r.kc("ngIf",e.currentWord))},directives:[k.a,o.l,c.a,o.k,S.a,c.b,f.b,C.a],styles:['.main-content[_ngcontent-%COMP%]{width:500px}.wordsCount[_ngcontent-%COMP%]{text-align:right}.game__top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:5px}.game__left[_ngcontent-%COMP%]{width:30%}.game__right[_ngcontent-%COMP%]{width:65%}.game__wordName[_ngcontent-%COMP%]{font-weight:500;overflow-wrap:break-word}.game__transcription[_ngcontent-%COMP%]{color:grey;font-weight:300}.game__option[_ngcontent-%COMP%]{width:100%;white-space:pre-wrap!important;position:relative}.game__option[_ngcontent-%COMP%]:nth-child(n+2){margin-top:5px}.game__option[_ngcontent-%COMP%]:before{content:attr(data-before);position:absolute;left:-15px;color:grey;font-size:1em}mat-card-actions[_ngcontent-%COMP%]{text-align:right}.button-nothing[_ngcontent-%COMP%]:before{content:"Enter";position:absolute;left:-40px;color:grey;font-size:1em;cursor:none}']}),t})();function W(t,e){if(1&t&&(r.Sb(0,"p",11),r.zc(1),r.Rb()),2&t){const t=r.ec(2);r.Bb(1),r.Bc(" [",t.currentWord.transcription,"] ")}}function N(t,e){if(1&t&&(r.Sb(0,"span"),r.zc(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ac(t)}}function P(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",12),r.ac("click",(function(){r.rc(t);const n=e.$implicit;return r.ec(2).chooseCharacter(n.value)})),r.zc(1),r.Rb()}if(2&t){const t=e.$implicit;r.wc("animation",t.highlight?"incorrect .5s":""),r.Bb(1),r.Bc(" ",t.value," ")}}function B(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",13),r.ac("click",(function(){return r.rc(t),r.ec(2).onNext()})),r.zc(1," Next "),r.Rb()}}function A(t,e){if(1&t&&(r.Sb(0,"div",1),r.Sb(1,"p",2),r.zc(2),r.Rb(),r.Sb(3,"mat-card",3),r.Sb(4,"h2",4),r.zc(5),r.Rb(),r.xc(6,W,2,1,"p",5),r.Sb(7,"div",6),r.xc(8,N,2,1,"span",7),r.Rb(),r.Sb(9,"div",8),r.xc(10,P,2,3,"button",9),r.Rb(),r.xc(11,B,2,0,"button",10),r.Rb(),r.Rb()),2&t){const t=r.ec();r.Bb(2),r.Ac(t.results.length+1+" / "+t.words.length),r.Bb(3),r.Ac(null==t.currentWord?null:t.currentWord.russian.join(",")),r.Bb(1),r.kc("ngIf",t.isAnswered),r.Bb(2),r.kc("ngForOf",t.englishWord),r.Bb(2),r.kc("ngForOf",t.characters),r.Bb(1),r.kc("ngIf",t.isAnswered)}}let I=(()=>{class t{constructor(t,e,n){this.learnService=t,this.utilsService=e,this.router=n}onkeyup(t){if("Enter"===t.key)return void this.onNext();const e=(" "===t.key?"_":t.key).toUpperCase();this.characters.findIndex(t=>t.value===e)<0||this.chooseCharacter(e)}ngOnInit(){this.initializeState(),this.learnService.getWordsToLearn(null,4),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.getNextWord()})}chooseCharacter(t){if(this.isItNextLetter(t)){this.englishWord[this.currentWord.english.length-this.characters.length]=t;const e=this.characters.findIndex(e=>e.value===t);this.characters.splice(e,1)}else{if(1===this.mistakes)return this.addResult(!1),void this.getNextWord();this.mistakes++;const e=this.characters.findIndex(e=>e.value===t);this.characters[e].highlight=!0,setTimeout(()=>this.characters[e].highlight=!1,500)}0===this.characters.length&&(this.onPronounce(),this.isAnswered=!0)}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(null,4)}onPronounce(){this.utilsService.onPronounce(this.currentWord.sound_url)}onNext(){this.isAnswered&&(this.addResult(!0),this.getNextWord(),this.isAnswered=!1)}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,4,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Word constructor",result:this.results}})}getNextWord(){this.mistakes=0,this.currentWord=this.words[this.results.length],this.currentWord?(this.englishWord=Array(this.currentWord.english.length),this.characters=this.calculateCharacters(this.currentWord.english)):this.finishGame()}calculateCharacters(t){let e=[];for(const n of t)e.push({value:n.trim().toUpperCase()||"_",highlight:!1});return e=this.utilsService.shuffleArray(e),e}isItNextLetter(t){return"_"===t&&(t=" "),this.currentWord.english[this.currentWord.english.length-this.characters.length].toUpperCase()===t}initializeState(){this.results=[],this.words=[],this.currentWord=null,this.englishWord=[],this.characters=[],this.mistakes=0,this.isAnswered=!1}addResult(t){this.results.push({wordId:this.currentWord.id,isCorrect:t})}ngOnDestroy(){this.subscriptionWords.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(m.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-word-constructor"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.qc)},decls:2,vars:1,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"game__word"],["class","transcription",4,"ngIf"],[1,"characters-holder"],[4,"ngFor","ngForOf"],[1,"characters"],["mat-stroked-button","","color","primary",3,"animation","click",4,"ngFor","ngForOf"],["mat-raised-button","",3,"click",4,"ngIf"],[1,"transcription"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.xc(1,A,12,6,"div",0),r.Rb()),2&t&&(r.Bb(1),r.kc("ngIf",e.currentWord))},directives:[k.a,o.l,c.a,o.k,f.b],styles:[".transcription[_ngcontent-%COMP%]{color:grey}.main-content[_ngcontent-%COMP%]{width:600px;height:300px;margin:0 auto}.game[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center}.wordsCount[_ngcontent-%COMP%]{text-align:end}.characters-holder[_ngcontent-%COMP%]{margin:15px 0}.characters-holder[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{display:flex;justify-content:center}span[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid #000;border-radius:2px;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}span[_ngcontent-%COMP%]:nth-child(n+2){margin-left:2px}@-webkit-keyframes incorrect{0%{background:initial}50%{background:red}to{background:initial}}@keyframes incorrect{0%{background:initial}50%{background:red}to{background:initial}}"]}),t})();var M=n("kmnG"),z=n("qFsG"),T=n("3Pt+");const L=["input"];function j(t,e){if(1&t){const t=r.Tb();r.Sb(0,"mat-form-field",8),r.Sb(1,"mat-label"),r.zc(2,"Type word here"),r.Rb(),r.Sb(3,"input",9,10),r.ac("ngModelChange",(function(e){return r.rc(t),r.ec().inputValue=e})),r.Rb(),r.Rb()}if(2&t){const t=r.ec();r.Bb(3),r.kc("ngModel",t.inputValue)}}function $(t,e){if(1&t&&(r.Sb(0,"p",15),r.zc(1),r.Rb()),2&t){const t=r.ec(2);r.Bb(1),r.Bc(" ",t.inputValue," ")}}function F(t,e){if(1&t&&(r.Sb(0,"div",11),r.Sb(1,"p",12),r.zc(2),r.Rb(),r.xc(3,$,2,1,"p",13),r.Sb(4,"p",14),r.zc(5),r.Rb(),r.Sb(6,"p"),r.zc(7),r.Rb(),r.Sb(8,"p"),r.zc(9),r.Rb(),r.Rb()),2&t){const t=r.ec();r.Bb(2),r.Ac(t.currentWord.english),r.Bb(1),r.kc("ngIf",t.inputValue.toUpperCase()!==t.currentWord.english.toUpperCase()),r.Bb(2),r.Bc("[",t.currentWord.transcription,"]"),r.Bb(2),r.Ac(t.currentWord.russian.join(",")),r.Bb(2),r.Ac(t.currentWord.text)}}let q=(()=>{class t{constructor(t,e,n){this.learnService=t,this.utilsService=e,this.router=n}set input(t){t&&(this.inputPlaceholder=t.nativeElement)}onkeyup(t){"Enter"===t.key&&this.onEnterClick()}ngOnInit(){this.initializeState(),this.subscriptionWords=this.learnService.wordsUpdateListener$.subscribe(t=>{this.words=t,this.getNextWord()}),this.learnService.getWordsToLearn(!1,5)}onEnterAnswer(){this.isAnswered=!0;const t={wordId:this.currentWord.id,isCorrect:this.inputValue.toUpperCase()===this.currentWord.english.toUpperCase()};this.results.push(t)}onEnterClick(){if(this.isAnswered)return this.getNextWord(),void(this.isAnswered=!1);this.onEnterAnswer()}onPronounce(){this.utilsService.onPronounce(this.currentWord.sound_url)}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(!1,5)}getNextWord(){this.currentWord=this.words[this.results.length],this.currentWord?(this.inputValue="",this.onPronounce(),setTimeout(()=>this.inputPlaceholder.focus(),0)):this.finishGame()}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,5,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Listening",result:this.results}})}initializeState(){this.words=[],this.currentWord=null,this.results=[],this.inputValue="",this.isAnswered=!1}ngOnDestroy(){this.subscriptionWords.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(m.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-listening"]],viewQuery:function(t,e){var n;1&t&&r.Dc(L,!0),2&t&&r.nc(n=r.bc())&&(e.input=n.first)},hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.qc)},decls:13,vars:3,consts:[[1,"main-content"],[1,"wordsCount"],[1,"game"],[1,"btn--pronounce"],["mat-fab","","color","primary",3,"click"],["class","input",4,"ngIf"],["class","show",4,"ngIf"],["mat-raised-button","",3,"click"],[1,"input"],["matInput","",3,"ngModel","ngModelChange"],["input",""],[1,"show"],[1,"show__wordCorrect"],["class","show__wordIncorrect",4,"ngIf"],[1,"show__transcription"],[1,"show__wordIncorrect"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.Sb(1,"div",0),r.Sb(2,"p",1),r.zc(3),r.Rb(),r.Sb(4,"mat-card",2),r.Sb(5,"h2",3),r.Sb(6,"button",4),r.ac("click",(function(){return e.onPronounce()})),r.Sb(7,"mat-icon"),r.zc(8,"volume_up"),r.Rb(),r.Rb(),r.Rb(),r.xc(9,j,5,1,"mat-form-field",5),r.xc(10,F,10,5,"div",6),r.Sb(11,"button",7),r.ac("click",(function(){return e.onEnterClick()})),r.zc(12,"Enter"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(3),r.Ac(e.results.length+1+" / "+e.words.length),r.Bb(6),r.kc("ngIf",!e.isAnswered),r.Bb(1),r.kc("ngIf",e.isAnswered))},directives:[k.a,c.a,f.b,C.a,o.l,M.c,M.f,z.a,T.b,T.l,T.o],styles:[".main-content[_ngcontent-%COMP%]{width:500px}.wordsCount[_ngcontent-%COMP%]{text-align:right}.btn--pronounce[_ngcontent-%COMP%]{text-align:center}.input[_ngcontent-%COMP%]{margin:50px 0;width:100%}.game[_ngcontent-%COMP%]{width:100%;height:100%}.show[_ngcontent-%COMP%]{text-align:center}.show__wordCorrect[_ngcontent-%COMP%]{font-size:18px;color:green}.show__wordIncorrect[_ngcontent-%COMP%]{color:red}.show__transcription[_ngcontent-%COMP%]{color:grey}"]}),t})();function G(t,e){if(1&t&&(r.Sb(0,"p",7),r.zc(1),r.Rb()),2&t){const t=r.ec().$implicit;r.Bb(1),r.Bc(" ",t.russian.join(",")," ")}}function U(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",8),r.ac("click",(function(){r.rc(t);const e=r.ec().$implicit;return r.ec().addResult(e,!0)})),r.zc(1," I know "),r.Rb()}}function H(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",9),r.ac("click",(function(){r.rc(t);const e=r.ec().$implicit;return r.ec().addResult(e,!1)})),r.zc(1," I don't know "),r.Rb()}}function E(t,e){if(1&t){const t=r.Tb();r.Sb(0,"mat-card"),r.Sb(1,"h2"),r.zc(2),r.Rb(),r.xc(3,G,2,1,"p",2),r.Sb(4,"button",3),r.ac("click",(function(){r.rc(t);const n=e.$implicit;return r.ec().onPronounce(n.sound_url)})),r.Sb(5,"mat-icon"),r.zc(6,"volume_up"),r.Rb(),r.Rb(),r.Sb(7,"p",4),r.zc(8),r.Rb(),r.Sb(9,"mat-card-actions"),r.xc(10,U,2,0,"button",5),r.xc(11,H,2,0,"button",6),r.Rb(),r.Rb()}if(2&t){const t=e.$implicit,n=r.ec();r.wc("border",n.checkedWords[t.id]),r.Bb(2),r.Ac(t.english),r.Bb(1),r.kc("ngIf",n.checkedWords[t.id]),r.Bb(5),r.Bc("[",t.transcription,"]"),r.Bb(2),r.kc("ngIf",!n.checkedWords[t.id]),r.Bb(1),r.kc("ngIf",!n.checkedWords[t.id])}}let V=(()=>{class t{constructor(t,e,n){this.learnService=t,this.utilsService=e,this.router=n,this.checkedWords={}}ngOnInit(){this.initializeState(),this.words$=this.learnService.wordsUpdateListener$.pipe(Object(b.a)(t=>this.wordsLength=t.length)),this.learnService.getWordsToLearn(!1,6)}onPronounce(t){this.utilsService.onPronounce(t)}addResult(t,e){const n={wordId:t.id,isCorrect:e};this.checkedWords[t.id]=e?"1px solid green":"1px solid red",this.onPronounce(t.sound_url),this.results.push(n),this.results.length===this.wordsLength&&this.finishGame()}learnAgain(){this.initializeState(),this.learnService.getWordsToLearn(!1,6)}finishGame(){const t=this.results.filter(t=>t.isCorrect).map(t=>t.wordId);this.learnService.toggleLearnings(t,!1,6,!1),this.router.navigate(["/learn/result"],{state:{gameName:"Word cards",result:this.results}})}initializeState(){this.results=[],this.wordsLength=0,this.checkedWords={}}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.a),r.Nb(m.a),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-word-cards"]],decls:3,vars:3,consts:[[1,"main-content"],[3,"border",4,"ngFor","ngForOf"],["class","translation",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"transcription"],["mat-raised-button","","class","btn","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","class","btn idk",3,"click",4,"ngIf"],[1,"translation"],["mat-raised-button","","color","primary",1,"btn",3,"click"],["mat-raised-button","",1,"btn","idk",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.xc(1,E,12,7,"mat-card",1),r.fc(2,"async"),r.Rb()),2&t&&(r.Bb(1),r.kc("ngForOf",r.gc(2,1,e.words$)))},directives:[o.k,c.a,o.l,f.b,C.a,c.b],pipes:[o.b],styles:[".main-content[_ngcontent-%COMP%]{width:80%;margin:0 auto;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:20px}mat-card[_ngcontent-%COMP%]{width:200px;display:flex;flex-direction:column;align-items:center}.transcription[_ngcontent-%COMP%]{color:grey}.btn[_ngcontent-%COMP%]{display:block;margin:0!important}.btn[_ngcontent-%COMP%], mat-card-actions[_ngcontent-%COMP%]{width:100%}.idk[_ngcontent-%COMP%]{margin-top:10px}"]}),t})(),D=(()=>{class t{constructor(t){this.learnService=t}resolve(){return this.learnService.getQuantities()}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s.a))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=n("Qu3c");function J(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",7),r.ac("click",(function(){return r.rc(t),r.ec().onClick()})),r.zc(1," Learn more "),r.Rb()}}const K=[{path:"",component:h,resolve:{quantities:D}},{path:"word-translation",component:x,canActivate:[g],data:{gameName:"word-translation"}},{path:"translation-word",component:x,canActivate:[g],data:{gameName:"translation-word"}},{path:"savannah",component:v,canActivate:[g]},{path:"word_constructor",component:I,canActivate:[g]},{path:"listening",component:q,canActivate:[g]},{path:"word_cards",component:V,canActivate:[g]},{path:"result",component:(()=>{class t{constructor(t,e){this.location=t,this.router=e}onkeyup(t){"Enter"===t.key&&(12===this.results.length?this.onClick():this.router.navigate(["/learn"]))}ngOnInit(){this.results=window.history.state.result,[this.correct,this.incorrect]=this.calculateCorrectAndIncorrect(this.results)}onClick(){this.location.back()}calculateCorrectAndIncorrect(t){let e=0,n=0;for(const i of this.results)i.isCorrect?e++:n++;return[e,n]}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(o.h),r.Nb(i.c))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-results"]],hostBindings:function(t,e){1&t&&r.ac("keyup",(function(t){return e.onkeyup(t)}),!1,r.qc)},decls:11,vars:8,consts:[[1,"result"],[1,"visual"],[1,"correct",3,"matTooltip"],[1,"incorrect",3,"matTooltip"],[1,"buttons"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","routerLink","/learn"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"app-centered-projection"),r.Sb(1,"mat-card",0),r.Sb(2,"h2"),r.zc(3),r.Rb(),r.Sb(4,"div",1),r.Ob(5,"div",2),r.Ob(6,"div",3),r.Rb(),r.Sb(7,"div",4),r.xc(8,J,2,0,"button",5),r.Sb(9,"button",6),r.zc(10,"Go to training"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(3),r.Bc("",e.results.length," words"),r.Bb(2),r.wc("width",e.correct/e.results.length*100+"%"),r.kc("matTooltip",e.correct+" correct words"),r.Bb(1),r.wc("width",e.incorrect/e.results.length*100+"%"),r.kc("matTooltip",e.incorrect+" incorrect words"),r.Bb(2),r.kc("ngIf",12===e.results.length))},directives:[k.a,c.a,Q.a,o.l,f.b,i.d],styles:[".result[_ngcontent-%COMP%]{width:200px;text-align:center}.correct[_ngcontent-%COMP%]{background:#1aff1a;height:20px}.incorrect[_ngcontent-%COMP%]{margin-top:20px;background:#f99;height:20px}.buttons[_ngcontent-%COMP%]{margin-top:50px}"]}),t})(),canActivate:[(()=>{class t{constructor(t){this.router=t}canActivate(){const t=this.router.getCurrentNavigation().extras;if(t.state&&t.state.gameName&&t.state.result)return!0;this.router.navigate(["/learn"])}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(i.c))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}];let X=(()=>{class t{}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(K)],i.g]}),t})();var Y=n("PCNd");let Z=(()=>{class t{}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(e){return new(e||t)},providers:[D],imports:[[X,Y.a]]}),t})()}}]);