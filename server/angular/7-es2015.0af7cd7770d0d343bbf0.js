(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{YuuO:function(t,e,r){"use strict";r.r(e),r.d(e,"AuthModule",(function(){return j}));var n=r("tyNb"),a=r("fXoL"),i=r("tXUu"),o=r("Wp6s"),s=r("ofXK"),u=r("3Pt+"),c=r("Kj3r"),m=r("/uUt"),l=r("eIep"),b=r("lJxs"),p=r("SxV6"),d=r("7dP1"),h=r("kmnG"),f=r("qFsG"),g=r("bTqV");function S(t,e){1&t&&(a.Sb(0,"mat-error"),a.zc(1,"Username must be at least 4 characters long"),a.Rb())}function w(t,e){1&t&&(a.Sb(0,"mat-error"),a.zc(1,"Username already taken"),a.Rb())}function F(t,e){1&t&&(a.Sb(0,"mat-error"),a.zc(1,"Email already taken"),a.Rb())}function y(t,e){1&t&&(a.Sb(0,"mat-error"),a.zc(1,"Email must be valid"),a.Rb())}function v(t,e){1&t&&(a.Sb(0,"mat-error"),a.zc(1,"Password must be at least 8 characters long"),a.Rb())}let R=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){this.initializeForm()}onSubmit(){this.authForm.valid&&this.authService.signup(this.authForm.value)}initializeForm(){this.authForm=new u.e({email:new u.c("",[u.r.required,u.r.email],this.isFieldTaken.bind(this,"email")),password:new u.c("",[u.r.required,u.r.minLength(8)]),username:new u.c("",[u.r.required,u.r.minLength(4)],this.isFieldTaken.bind(this,"username"))})}isFieldTaken(t,e){return e.valueChanges.pipe(Object(c.a)(1e3),Object(m.a)(),Object(l.a)(()=>this.authService.checkIfTaken(t,e.value)),Object(b.a)(t=>t.isPresent?t:null),Object(p.a)())}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-signup"]],decls:20,vars:7,consts:[[3,"formGroup","ngSubmit"],["required","","matInput","","formControlName","username"],[4,"ngIf"],["type","email","minlength","8","required","","matInput","","formControlName","email"],["minlength","8","required","","matInput","","type","password","formControlName","password"],["type","submit","mat-raised-button","",3,"disabled"]],template:function(t,e){1&t&&(a.Sb(0,"form",0),a.ac("ngSubmit",(function(){return e.onSubmit()})),a.Sb(1,"mat-form-field"),a.Sb(2,"mat-label"),a.zc(3,"Username"),a.Rb(),a.Ob(4,"input",1),a.xc(5,S,2,0,"mat-error",2),a.xc(6,w,2,0,"mat-error",2),a.Rb(),a.Sb(7,"mat-form-field"),a.Sb(8,"mat-label"),a.zc(9,"Email"),a.Rb(),a.Ob(10,"input",3),a.xc(11,F,2,0,"mat-error",2),a.xc(12,y,2,0,"mat-error",2),a.Rb(),a.Sb(13,"mat-form-field"),a.Sb(14,"mat-label"),a.zc(15,"Password"),a.Rb(),a.Ob(16,"input",4),a.xc(17,v,2,0,"mat-error",2),a.Rb(),a.Sb(18,"button",5),a.zc(19," Submit "),a.Rb(),a.Rb()),2&t&&(a.kc("formGroup",e.authForm),a.Bb(5),a.kc("ngIf",e.authForm.get("username").touched&&(null==e.authForm.get("username").errors?null:e.authForm.get("username").errors.minlength)),a.Bb(1),a.kc("ngIf",e.authForm.get("username").touched&&(null==e.authForm.get("username").errors?null:e.authForm.get("username").errors.isPresent)),a.Bb(5),a.kc("ngIf",e.authForm.get("email").touched&&(null==e.authForm.get("email").errors?null:e.authForm.get("email").errors.isPresent)),a.Bb(1),a.kc("ngIf",e.authForm.get("email").touched&&(null==e.authForm.get("email").errors?null:e.authForm.get("email").errors.email)),a.Bb(5),a.kc("ngIf",e.authForm.get("password").touched&&(null==e.authForm.get("password").errors?null:e.authForm.get("password").errors.minlength)),a.Bb(1),a.kc("disabled",!e.authForm.valid))},directives:[u.s,u.m,u.f,h.c,h.f,f.a,u.b,u.q,u.l,u.d,s.l,u.h,g.b,h.b],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}"]}),t})();function O(t,e){1&t&&(a.Sb(0,"span",5),a.zc(1,"Invalid email or password"),a.Rb())}let I=(()=>{class t{constructor(t,e){this.authService=t,this.router=e,this.isError=!1}ngOnInit(){this.initializeForm()}onSubmit(){this.authForm.valid&&this.authService.login(this.authForm.value).subscribe(t=>{this.authService.initializeAuthState(t),this.router.navigate(["/dictionary"])},t=>{this.isError=404===t.status})}initializeForm(){this.authForm=new u.e({email:new u.c(""),password:new u.c("")})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(d.a),a.Nb(n.c))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-login"]],decls:12,vars:2,consts:[[3,"formGroup","ngSubmit"],["class","incorrectCredentials",4,"ngIf"],["type","email","matInput","","formControlName","email"],["matInput","","type","password","formControlName","password"],["type","submit","mat-raised-button",""],[1,"incorrectCredentials"]],template:function(t,e){1&t&&(a.Sb(0,"form",0),a.ac("ngSubmit",(function(){return e.onSubmit()})),a.xc(1,O,2,0,"span",1),a.Sb(2,"mat-form-field"),a.Sb(3,"mat-label"),a.zc(4,"Email"),a.Rb(),a.Ob(5,"input",2),a.Rb(),a.Sb(6,"mat-form-field"),a.Sb(7,"mat-label"),a.zc(8,"Password"),a.Rb(),a.Ob(9,"input",3),a.Rb(),a.Sb(10,"button",4),a.zc(11," Submit "),a.Rb(),a.Rb()),2&t&&(a.kc("formGroup",e.authForm),a.Bb(1),a.kc("ngIf",e.isError))},directives:[u.s,u.m,u.f,s.l,h.c,h.f,f.a,u.b,u.l,u.d,g.b],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.incorrectCredentials[_ngcontent-%COMP%]{color:red;padding:10px 0}"]}),t})();function k(t,e){1&t&&a.Ob(0,"app-signup")}function z(t,e){1&t&&a.Ob(0,"app-login")}let x=(()=>{class t{constructor(t){this.route=t}ngOnInit(){this.route.url.subscribe(t=>{this.form=t[0].path})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(n.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-auth"]],decls:8,vars:5,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(a.Sb(0,"app-centered-projection"),a.Sb(1,"mat-card"),a.Sb(2,"mat-card-header"),a.Sb(3,"mat-card-title"),a.zc(4),a.fc(5,"uppercase"),a.Rb(),a.Rb(),a.xc(6,k,1,0,"app-signup",0),a.xc(7,z,1,0,"app-login",0),a.Rb(),a.Rb()),2&t&&(a.Bb(4),a.Ac(a.gc(5,3,e.form)),a.Bb(2),a.kc("ngIf","signup"===e.form),a.Bb(1),a.kc("ngIf","login"===e.form))},directives:[i.a,o.a,o.d,o.g,s.l,R,I],pipes:[s.r],styles:["mat-card[_ngcontent-%COMP%]{width:300px}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),t})();const C=[{path:"login",component:x},{path:"signup",component:x}];let P=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[n.g.forChild(C)],n.g]}),t})();var N=r("PCNd");let j=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[P,N.a,u.p]]}),t})()}}]);